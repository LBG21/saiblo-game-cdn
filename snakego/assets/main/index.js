System.register("chunks:///_virtual/slider-ctrl.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var t,e,o,n,c,i,l,s;return{setters:[function(r){t=r.inheritsLoose,e=r.defineProperty,o=r.assertThisInitialized},function(r){n=r.cclegacy,c=r._decorator,i=r.Color,l=r.Sprite,s=r.Component}],execute:function(){var a;n._RF.push({},"0dc81FpNV1Gu7PzuHGs1FyN","slider-ctrl",void 0);var u=c.ccclass,p=c.menu;r("SliderCtrl",u("SliderCtrl")(a=p("UI/SliderCtrl")(a=function(r){function n(){for(var t,n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return t=r.call.apply(r,[this].concat(c))||this,e(o(t),"_color",new i),t}t(n,r);var c=n.prototype;return c.start=function(){},c.changeAlpha=function(r){var t=this.getComponent(l);this._color.set(t.color),this._color.a=255*r.progress,t.color=this._color},n}(s))||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/miniitem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./item.ts"],(function(i){"use strict";var t,e,n,o,r,a,s,c,l,f,p,u,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.defineProperty,o=i.assertThisInitialized,r=i.initializerDefineProperty},function(i){a=i.cclegacy,s=i._decorator,c=i.Prefab,l=i.Node,f=i.instantiate,p=i.Label,u=i.Component},function(i){m=i.itemType}],execute:function(){var d,h,y,v,_,b,g;a._RF.push({},"21ed3L3+y1AVIRUanyYr7Kh","miniitem",void 0);var w=s.ccclass,x=s.property;i("Miniitem",(d=w("Miniitem"),h=x(c),y=x(l),d((b=t((_=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=i.call.apply(i,[this].concat(a))||this,n(o(t),"x",void 0),n(o(t),"y",void 0),n(o(t),"time",void 0),n(o(t),"param",void 0),n(o(t),"type",void 0),n(o(t),"born_round",void 0),r(o(t),"miniitem_info",b,o(t)),n(o(t),"info",void 0),r(o(t),"tags",g,o(t)),t}e(t,i);var a=t.prototype;return a.onLoad=function(){this.info=f(this.miniitem_info).getChildByName("info_text").getComponent(p),this.info.node.parent.active=!1},a.start=function(){},a.init_info=function(){var i;switch(this.type){case m.elongate:i="增长道具";break;case m.split:i="分裂道具";break;case m.melt:i="熔化道具"}this.info.string="种类 :  "+i+"\nx :  "+this.x+"\ny :  "+this.y+"\n参数 :  "+this.param+"\n"},a.show_info=function(){var i=this.info.node.parent;i.setWorldScale(1,1,1),i.active=!0},a.delete_info=function(){this.info.node.parent.active=!1},t}(u)).prototype,"miniitem_info",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(_.prototype,"tags",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=_))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/wall.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,r,s;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Component}],execute:function(){var a;o._RF.push({},"28787gehbdJu70Mc48PSVCs","wall",void 0);var c=r.ccclass;r.property,t("Wall",c("Wall")(a=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(n(e),"team",1),i(n(e),"x",void 0),i(n(e),"y",void 0),e}e(o,t);var r=o.prototype;return r.start=function(){},r.onDelete=function(){this.node&&this.node.isValid&&this.node.destroy(),this.isValid&&this.destroy()},o}(s))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/help.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,a,n,s,r,l,c,h,o,b,p,u,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.defineProperty,r=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,c=t._decorator,h=t.Node,o=t.Button,b=t.Label,p=t.UIOpacity,u=t.tween,m=t.Component}],execute:function(){var v,g,k,f,y,d,w,_,z,x,C,q,L,H,B,F,P,D,I,N,R,O,S;l._RF.push({},"36f3b0aPzRCvrf2ngZHULxz","help",void 0);var U=c.ccclass,j=c.property;t("Help",(v=U("Help"),g=j(h),k=j(h),f=j(h),y=j(h),d=j(h),w=j(h),_=j(h),z=j(h),x=j(h),C=j(o),v((H=i((L=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,a(n(i),"text",H,n(i)),s(n(i),"label",void 0),a(n(i),"minimap",B,n(i)),a(n(i),"minimap_ctrl",F,n(i)),a(n(i),"info",P,n(i)),a(n(i),"equipment",D,n(i)),a(n(i),"playback",I,n(i)),a(n(i),"direction",N,n(i)),a(n(i),"infotab",R,n(i)),a(n(i),"team",O,n(i)),s(n(i),"snake",void 0),a(n(i),"known",S,n(i)),s(n(i),"known_text",void 0),s(n(i),"state",0),i}e(i,t);var l=i.prototype;return l.start=function(){this.label=this.text.getChildByName("text").getComponent(b),this.known_text=this.known.node.getChildByName("Label").getComponent(b);for(var t,i=r(this.node.children);!(t=i()).done;){t.value.active=!1}this.node.active=!1},l.activate=function(t){t.active=!0,this.blink(t)},l.blink=function(t){var i=t.getComponent(p);i||(i=t.addComponent(p)),i.opacity=255;u(i).to(.5,{opacity:70}).to(.5,{opacity:255}).union().repeatForever().start()},l.help=function(t){switch(this.state){case 0:this.text.active=!0,this.label.string="SnakeGo播放器新手导引\n"+(t?"在线模式":"离线模式"),this.known_text.string="下一步",this.known.node.active=!0,this.state++;break;case 1:this.label.string="中央为棋盘，棋盘是两方蛇交战的场所",this.state++;break;case 2:this.activate(this.team),this.label.string="此处会显示双方玩家的阵营颜色",t?this.state++:this.state=12;break;case 3:this.team.active=!1,this.activate(this.snake),this.label.string="比赛开始后，轮到你方时\n每次操作一条蛇移动，待移动的蛇会闪烁显示",this.state++;break;case 4:this.label.string="点击操作方向键，可以进行移动操作",this.activate(this.direction),this.state++;break;case 5:this.label.string="这是道具栏，代表当前闪烁蛇拥有的道具\n自左至右依次为增长、融化、分裂\n点击融化或分裂道具来使用道具",this.team.active=!1,this.direction.active=!1,this.activate(this.equipment),this.state++;break;case 6:this.label.string="这是小地图，用于显示整个对局将来的道具分布\n你可以拖动小地图进度条来查看对应回合的道具\n此外，当前帧每条蛇的位置也都会在小地图上显示",this.equipment.active=!1,this.activate(this.minimap),this.state++;break;case 7:this.label.string="还可以通过直接输入回合数\n或者使用微调箭头来查看你想要的回合\n使用最左侧的复位按钮恢复默认状态，显示当前回合后10回合的道具",this.minimap.active=!1,this.activate(this.minimap_ctrl),this.state++;break;case 8:this.label.string="这是信息栏，用于显示对局信息\n默认情况下显示当前回合的信息",this.minimap.active=!1,this.minimap_ctrl.active=!1,this.activate(this.info),this.state++;break;case 9:this.label.string="光标悬浮在蛇头，在信息栏中显示该蛇的信息\n光标悬浮在小地图道具，可以显示该道具信息\n此外，当有蛇死亡/对局结束时，信息栏也会有所显示",this.state++;break;case 10:this.label.string="这是全局信息栏，用于显示双方的统计信息\n点击信息栏底部的切换按钮可以切换阵营",this.info.active=!1,this.activate(this.infotab),this.state++;break;case 11:this.label.string="开始战斗吧",this.known_text.string="我知道了",this.infotab.active=!1,this.state=21;break;case 12:this.label.string="这是回放控制区，可以显示对局中任意一帧的内容",this.team.active=!1,this.activate(this.playback),this.state++;break;case 13:this.label.string="按钮说明\n回到第一帧|回退一帧|播放暂停|倍速播放|后退一帧",this.state++;break;case 14:this.label.string="拖动进度条可以查看任意一帧",this.state++;break;case 15:this.label.string="这是道具栏，代表当前帧待行动蛇拥有的道具\n自左至右依次为增长、融化、分裂",this.playback.active=!1,this.activate(this.equipment),this.state++;break;case 16:this.label.string="这是小地图，用于显示整个对局将来的道具分布\n你可以拖动小地图进度条来查看对应回合的道具\n此外，当前帧每条蛇的位置也都会在小地图上显示",this.equipment.active=!1,this.activate(this.minimap),this.state++;break;case 17:this.label.string="还可以通过直接输入回合数\n或者使用微调箭头来查看你想要的回合\n使用最左侧的复位按钮恢复默认状态，显示当前回合后10回合的道具",this.minimap.active=!1,this.activate(this.minimap_ctrl),this.state++;break;case 18:this.label.string="这是信息栏，用于显示对局信息\n默认情况下显示当前回合的信息",this.minimap.active=!1,this.minimap_ctrl.active=!1,this.activate(this.info),this.state++;break;case 19:this.label.string="光标悬浮在蛇头，在信息栏中显示该蛇的信息\n光标悬浮在小地图道具，可以显示该道具信息\n此外，当有蛇死亡/对局结束时，信息栏也会有所显示",this.state++;break;case 20:this.label.string="这是全局信息栏，用于显示双方的统计信息\n点击信息栏底部的切换按钮可以切换阵营",this.info.active=!1,this.activate(this.infotab),this.known_text.string="我知道了",this.state++;break;case 21:this.infotab.active=!1,this.text.active=!1,this.known.node.active=!1,this.state=0}},i}(m)).prototype,"text",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(L.prototype,"minimap",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(L.prototype,"minimap_ctrl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(L.prototype,"info",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(L.prototype,"equipment",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(L.prototype,"playback",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(L.prototype,"direction",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(L.prototype,"infotab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(L.prototype,"team",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(L.prototype,"known",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=L))||q));l._RF.pop()}}}));

System.register("chunks:///_virtual/snake.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./item.ts","./bodynode.ts"],(function(e){"use strict";var t,i,n,a,o,s,r,l,_,d,h,b,u,w,p,c,m,g;return{setters:[function(e){t=e.defineProperty,i=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.assertThisInitialized,o=e.initializerDefineProperty},function(e){s=e.cclegacy,r=e._decorator,l=e.Prefab,_=e.Node,d=e.Vec3,h=e.resources,b=e.UIOpacity,u=e.instantiate,w=e.tween,p=e.Component},function(e){c=e.Item,m=e.itemType},function(e){g=e.BodyNode}],execute:function(){var f,q,y,v,z,P,k,x,T,I,O,S,D,N,E,F,L,H,R,U,W,G,C,M,V,B,A,K,j,J,Q,X,Y,Z,$,ee,te,ie,ne,ae,oe,se,re,le,_e,de,he,be,ue,we,pe,ce,me,ge,fe,qe,ye,ve,ze,Pe,ke,xe,Te,Ie,Oe,Se,De,Ne,Ee,Fe,Le,He,Re,Ue,We,Ge,Ce,Me,Ve,Be,Ae,Ke,je,Je,Qe,Xe,Ye,Ze,$e,et,tt,it,nt,at,ot,st,rt,lt,_t,dt,ht,bt,ut,wt,pt,ct,mt,gt,ft,qt,yt,vt,zt,Pt,kt,xt,Tt,It,Ot,St,Dt,Nt,Et,Ft,Lt,Ht,Rt,Ut,Wt,Gt,Ct,Mt,Vt,Bt,At,Kt,jt,Jt,Qt,Xt,Yt,Zt,$t,ei,ti,ii,ni,ai,oi,si,ri,li,_i,di,hi,bi,ui,wi,pi,ci,mi,gi,fi,qi,yi,vi,zi,Pi,ki,xi,Ti,Ii,Oi,Si,Di,Ni,Ei,Fi,Li,Hi,Ri,Ui,Wi,Gi,Ci,Mi,Vi,Bi,Ai,Ki,ji,Ji,Qi,Xi,Yi,Zi,$i,en,tn,nn,an,on,sn,rn,ln,_n,dn,hn,bn,un,wn,pn,cn,mn,gn,fn,qn,yn,vn,zn,Pn,kn,xn,Tn,In,On,Sn,Dn,Nn,En,Fn,Ln,Hn,Rn,Un,Wn,Gn,Cn,Mn,Vn,Bn,An,Kn,jn,Jn,Qn,Xn,Yn,Zn,$n,ea,ta,ia,na,aa,oa,sa,ra,la,_a,da,ha,ba,ua,wa,pa,ca,ma,ga,fa,qa,ya,va,za,Pa,ka,xa,Ta,Ia,Oa,Sa,Da,Na,Ea,Fa,La,Ha,Ra,Ua,Wa,Ga,Ca,Ma,Va,Ba,Aa,Ka,ja,Ja,Qa,Xa,Ya,Za;e({move_dir:void 0,operation_type:void 0,skin_type:void 0}),s._RF.push({},"4d1cd4OuH9KWqhJo1wOs2Iu","snake",void 0);var $a,eo,to,io=r.ccclass,no=r.property;!function(e){e[e.RIGHT=0]="RIGHT",e[e.UP=1]="UP",e[e.LEFT=2]="LEFT",e[e.DOWN=3]="DOWN",e[e.NO_MOVE=4]="NO_MOVE"}($a||($a=e("move_dir",{}))),function(e){e[e.move=1]="move",e[e.item=2]="item",e[e.split=3]="split"}(eo||(eo=e("operation_type",{}))),function(e){e[e.simple=0]="simple",e[e.split=1]="split",e[e.melt=2]="melt",e[e.both=3]="both"}(to||(to=e("skin_type",{})));e("MoveOpera",(function(e,i,n){t(this,"type",void 0),t(this,"snake",void 0),t(this,"direction",void 0),this.type=e,this.snake=i,this.direction=n})),e("ItemOpera",(function(e,i,n){t(this,"type",void 0),t(this,"snake",void 0),t(this,"item_id",void 0),this.type=e,this.snake=i,this.item_id=n})),e("Snake",(f=io("Snake"),q=no(l),y=no(l),v=no(l),z=no(l),P=no(l),k=no(l),x=no(l),T=no(l),I=no(l),O=no(l),S=no(l),D=no(l),N=no(l),E=no(l),F=no(l),L=no(l),H=no(l),R=no(l),U=no(l),W=no(l),G=no(l),C=no(l),M=no(l),V=no(l),B=no(l),A=no(l),K=no(l),j=no(l),J=no(l),Q=no(l),X=no(l),Y=no(l),Z=no(l),$=no(l),ee=no(l),te=no(l),ie=no(l),ne=no(l),ae=no(l),oe=no(l),se=no(l),re=no(l),le=no(l),_e=no(l),de=no(l),he=no(l),be=no(l),ue=no(l),we=no(l),pe=no(l),ce=no(l),me=no(l),ge=no(l),fe=no(l),qe=no(l),ye=no(l),ve=no(l),ze=no(l),Pe=no(l),ke=no(l),xe=no(l),Te=no(l),Ie=no(l),Oe=no(l),Se=no(l),De=no(l),Ne=no(l),Ee=no(l),Fe=no(l),Le=no(l),He=no(l),Re=no(l),Ue=no(l),We=no(l),Ge=no(l),Ce=no(l),Me=no(l),Ve=no(l),Be=no(l),Ae=no(l),Ke=no(l),je=no(l),Je=no(l),Qe=no(l),Xe=no(l),Ye=no(l),Ze=no(l),$e=no(l),et=no(l),tt=no(l),it=no(l),nt=no(l),at=no(l),ot=no(l),st=no(l),rt=no(l),lt=no(l),_t=no(l),dt=no(l),ht=no(l),bt=no(l),ut=no(l),wt=no(l),pt=no(l),ct=no(l),mt=no(l),gt=no(l),ft=no(l),qt=no(l),yt=no(l),vt=no(l),zt=no(l),Pt=no(l),kt=no(l),xt=no(l),Tt=no(l),It=no(l),Ot=no(l),St=no(l),Dt=no(l),Nt=no(l),Et=no(l),Ft=no(l),Lt=no(l),Ht=no(l),Rt=no(l),Ut=no(l),Wt=no(l),Gt=no(l),Ct=no(l),Mt=no(l),Vt=no(l),Bt=no(l),At=no(l),Kt=no(l),jt=no(l),Jt=no(l),Qt=no(l),Xt=no(l),Yt=no(l),Zt=no(l),$t=no(l),ei=no(l),ti=no(l),ii=no(l),ni=no(l),ai=no(l),oi=no(l),si=no(l),ri=no(l),f((di=i((_i=function(e){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,t(a(i),"id",0),t(a(i),"team",void 0),t(a(i),"head_dir",void 0),t(a(i),"new_head_pos",void 0),t(a(i),"refreshed",!0),t(a(i),"head",null),t(a(i),"tail",null),t(a(i),"len",1),t(a(i),"old_head_pos",null),t(a(i),"splititem",null),t(a(i),"meltitem",null),t(a(i),"length_bank",0),t(a(i),"extra_length_bank",0),t(a(i),"prev",null),t(a(i),"next",null),o(a(i),"body_pref",di,a(i)),o(a(i),"head_pref",hi,a(i)),o(a(i),"tail_pref",bi,a(i)),o(a(i),"snake_pref",ui,a(i)),o(a(i),"wp_body_horizontal",wi,a(i)),o(a(i),"wp_body_vertical",pi,a(i)),o(a(i),"wp_corner_top_left",ci,a(i)),o(a(i),"wp_corner_top_right",mi,a(i)),o(a(i),"wp_corner_bottom_left",gi,a(i)),o(a(i),"wp_corner_bottom_right",fi,a(i)),o(a(i),"wp_head_upwards",qi,a(i)),o(a(i),"wp_head_rightwards",yi,a(i)),o(a(i),"wp_head_downwards",vi,a(i)),o(a(i),"wp_head_leftwards",zi,a(i)),o(a(i),"wp_tail_upwards",Pi,a(i)),o(a(i),"wp_tail_rightwards",ki,a(i)),o(a(i),"wp_tail_downwards",xi,a(i)),o(a(i),"wp_tail_leftwards",Ti,a(i)),o(a(i),"bs_body_horizontal",Ii,a(i)),o(a(i),"bs_body_vertical",Oi,a(i)),o(a(i),"bs_corner_top_left",Si,a(i)),o(a(i),"bs_corner_top_right",Di,a(i)),o(a(i),"bs_corner_bottom_left",Ni,a(i)),o(a(i),"bs_corner_bottom_right",Ei,a(i)),o(a(i),"bs_head_upwards",Fi,a(i)),o(a(i),"bs_head_rightwards",Li,a(i)),o(a(i),"bs_head_downwards",Hi,a(i)),o(a(i),"bs_head_leftwards",Ri,a(i)),o(a(i),"bs_tail_upwards",Ui,a(i)),o(a(i),"bs_tail_rightwards",Wi,a(i)),o(a(i),"bs_tail_downwards",Gi,a(i)),o(a(i),"bs_tail_leftwards",Ci,a(i)),o(a(i),"bsp_body_horizontal",Mi,a(i)),o(a(i),"bsp_body_vertical",Vi,a(i)),o(a(i),"bsp_corner_top_left",Bi,a(i)),o(a(i),"bsp_corner_top_right",Ai,a(i)),o(a(i),"bsp_corner_bottom_left",Ki,a(i)),o(a(i),"bsp_corner_bottom_right",ji,a(i)),o(a(i),"bsp_head_upwards",Ji,a(i)),o(a(i),"bsp_head_rightwards",Qi,a(i)),o(a(i),"bsp_head_downwards",Xi,a(i)),o(a(i),"bsp_head_leftwards",Yi,a(i)),o(a(i),"bsp_tail_upwards",Zi,a(i)),o(a(i),"bsp_tail_rightwards",$i,a(i)),o(a(i),"bsp_tail_downwards",en,a(i)),o(a(i),"bsp_tail_leftwards",tn,a(i)),o(a(i),"bm_body_horizontal",nn,a(i)),o(a(i),"bm_body_vertical",an,a(i)),o(a(i),"bm_corner_top_left",on,a(i)),o(a(i),"bm_corner_top_right",sn,a(i)),o(a(i),"bm_corner_bottom_left",rn,a(i)),o(a(i),"bm_corner_bottom_right",ln,a(i)),o(a(i),"bm_head_upwards",_n,a(i)),o(a(i),"bm_head_rightwards",dn,a(i)),o(a(i),"bm_head_downwards",hn,a(i)),o(a(i),"bm_head_leftwards",bn,a(i)),o(a(i),"bm_tail_upwards",un,a(i)),o(a(i),"bm_tail_rightwards",wn,a(i)),o(a(i),"bm_tail_downwards",pn,a(i)),o(a(i),"bm_tail_leftwards",cn,a(i)),o(a(i),"bb_body_horizontal",mn,a(i)),o(a(i),"bb_body_vertical",gn,a(i)),o(a(i),"bb_corner_top_left",fn,a(i)),o(a(i),"bb_corner_top_right",qn,a(i)),o(a(i),"bb_corner_bottom_left",yn,a(i)),o(a(i),"bb_corner_bottom_right",vn,a(i)),o(a(i),"bb_head_upwards",zn,a(i)),o(a(i),"bb_head_rightwards",Pn,a(i)),o(a(i),"bb_head_downwards",kn,a(i)),o(a(i),"bb_head_leftwards",xn,a(i)),o(a(i),"bb_tail_upwards",Tn,a(i)),o(a(i),"bb_tail_rightwards",In,a(i)),o(a(i),"bb_tail_downwards",On,a(i)),o(a(i),"bb_tail_leftwards",Sn,a(i)),o(a(i),"ts_body_horizontal",Dn,a(i)),o(a(i),"ts_body_vertical",Nn,a(i)),o(a(i),"ts_corner_top_left",En,a(i)),o(a(i),"ts_corner_top_right",Fn,a(i)),o(a(i),"ts_corner_bottom_left",Ln,a(i)),o(a(i),"ts_corner_bottom_right",Hn,a(i)),o(a(i),"ts_head_upwards",Rn,a(i)),o(a(i),"ts_head_rightwards",Un,a(i)),o(a(i),"ts_head_downwards",Wn,a(i)),o(a(i),"ts_head_leftwards",Gn,a(i)),o(a(i),"ts_tail_upwards",Cn,a(i)),o(a(i),"ts_tail_rightwards",Mn,a(i)),o(a(i),"ts_tail_downwards",Vn,a(i)),o(a(i),"ts_tail_leftwards",Bn,a(i)),o(a(i),"tsp_body_horizontal",An,a(i)),o(a(i),"tsp_body_vertical",Kn,a(i)),o(a(i),"tsp_corner_top_left",jn,a(i)),o(a(i),"tsp_corner_top_right",Jn,a(i)),o(a(i),"tsp_corner_bottom_left",Qn,a(i)),o(a(i),"tsp_corner_bottom_right",Xn,a(i)),o(a(i),"tsp_head_upwards",Yn,a(i)),o(a(i),"tsp_head_rightwards",Zn,a(i)),o(a(i),"tsp_head_downwards",$n,a(i)),o(a(i),"tsp_head_leftwards",ea,a(i)),o(a(i),"tsp_tail_upwards",ta,a(i)),o(a(i),"tsp_tail_rightwards",ia,a(i)),o(a(i),"tsp_tail_downwards",na,a(i)),o(a(i),"tsp_tail_leftwards",aa,a(i)),o(a(i),"tm_body_horizontal",oa,a(i)),o(a(i),"tm_body_vertical",sa,a(i)),o(a(i),"tm_corner_top_left",ra,a(i)),o(a(i),"tm_corner_top_right",la,a(i)),o(a(i),"tm_corner_bottom_left",_a,a(i)),o(a(i),"tm_corner_bottom_right",da,a(i)),o(a(i),"tm_head_upwards",ha,a(i)),o(a(i),"tm_head_rightwards",ba,a(i)),o(a(i),"tm_head_downwards",ua,a(i)),o(a(i),"tm_head_leftwards",wa,a(i)),o(a(i),"tm_tail_upwards",pa,a(i)),o(a(i),"tm_tail_rightwards",ca,a(i)),o(a(i),"tm_tail_downwards",ma,a(i)),o(a(i),"tm_tail_leftwards",ga,a(i)),o(a(i),"tb_body_horizontal",fa,a(i)),o(a(i),"tb_body_vertical",qa,a(i)),o(a(i),"tb_corner_top_left",ya,a(i)),o(a(i),"tb_corner_top_right",va,a(i)),o(a(i),"tb_corner_bottom_left",za,a(i)),o(a(i),"tb_corner_bottom_right",Pa,a(i)),o(a(i),"tb_head_upwards",ka,a(i)),o(a(i),"tb_head_rightwards",xa,a(i)),o(a(i),"tb_head_downwards",Ta,a(i)),o(a(i),"tb_head_leftwards",Ia,a(i)),o(a(i),"tb_tail_upwards",Oa,a(i)),o(a(i),"tb_tail_rightwards",Sa,a(i)),o(a(i),"tb_tail_downwards",Da,a(i)),o(a(i),"tb_tail_leftwards",Na,a(i)),o(a(i),"minisnake_blue_h",Ea,a(i)),o(a(i),"minisnake_blue_v",Fa,a(i)),o(a(i),"minisnake_blue_head_down",La,a(i)),o(a(i),"minisnake_blue_head_up",Ha,a(i)),o(a(i),"minisnake_blue_head_right",Ra,a(i)),o(a(i),"minisnake_blue_head_left",Ua,a(i)),o(a(i),"minisnake_blue_leftup",Wa,a(i)),o(a(i),"minisnake_blue_leftdown",Ga,a(i)),o(a(i),"minisnake_blue_rightup",Ca,a(i)),o(a(i),"minisnake_blue_rightdown",Ma,a(i)),o(a(i),"minisnake_green_h",Va,a(i)),o(a(i),"minisnake_green_v",Ba,a(i)),o(a(i),"minisnake_green_head_down",Aa,a(i)),o(a(i),"minisnake_green_head_up",Ka,a(i)),o(a(i),"minisnake_green_head_right",ja,a(i)),o(a(i),"minisnake_green_head_left",Ja,a(i)),o(a(i),"minisnake_green_leftup",Qa,a(i)),o(a(i),"minisnake_green_leftdown",Xa,a(i)),o(a(i),"minisnake_green_rightup",Ya,a(i)),o(a(i),"minisnake_green_rightdown",Za,a(i)),t(a(i),"opacityComp",void 0),t(a(i),"tween",void 0),i}n(i,e);var s=i.prototype;return s.onLoad=function(){var e=this;this.head=new g,this.node.name="snake"+this.id.toString(),this.head.node=new _,this.setSkin(),this.node.setPosition(new d(0,0,0)),h.load("Prefabs/head",l,(function(t,i){e.head_pref=i})),h.load("Prefabs/tail",l,(function(t,i){e.tail_pref=i})),h.load("Prefabs/body",l,(function(t,i){e.body_pref=i})),h.load("Prefabs/snake",l,(function(t,i){e.snake_pref=i})),this.splititem=new c,this.splititem.id=-1,this.opacityComp=this.getComponent(b),this.init_blink(),this.set_split()},s.set_split=function(){var e=new c;e.type=m.split,e.param=512,e.id=-1,this.eatItem(e,!1)},s.move=function(e,t,i){var n;switch(e){case $a.UP:n=new d(0,1,0);break;case $a.DOWN:n=new d(0,-1,0);break;case $a.LEFT:n=new d(-1,0,0);break;case $a.RIGHT:n=new d(1,0,0)}if(this.new_head_pos=this.head.node.getPosition().add(n),this.head_dir=e,this.old_head_pos=this.head.node.getPosition(),this.head.node.setPosition(this.new_head_pos),this.len>=2){var a=new g;a.node=u(this.body_pref),a.prev=this.head,a.next=this.head.next,this.head.next.prev=a,this.head.next=a,this.node.addChild(a.node),a.node.setPosition(this.old_head_pos)}null!=this.meltitem&&(this.meltitem.param--,0==this.meltitem.param&&(this.meltitem=null)),this.length_bank+this.extra_length_bank>0?(this.len++,this.extra_length_bank>0?this.extra_length_bank--:this.length_bank--,null==this.tail&&(this.tail=new g,this.tail.node=u(this.tail_pref),this.tail.prev=this.head,this.head.next=this.tail,this.tail.node.setParent(this.node),this.tail.node.setPosition(new d(this.old_head_pos)))):this.tail&&(this.tail.node.setPosition(this.tail.prev.node.getPosition()),this.tail.prev.node.destroy(),this.tail.prev.prev.next=this.tail,this.tail.prev=this.tail.prev.prev),t?(this.eatItem(t,i),i&&(this.head_dir=e,this.setSkin())):i&&this.refreshSkinAfterMove(e)},s.eatItem=function(e,t){if(e)switch(e.eaten=!0,e.onEaten(t),e.type){case m.elongate:this.length_bank+=e.param;break;case m.split:this.splititem=e;break;case m.melt:this.meltitem&&this.meltitem.onDelete(),this.meltitem=e}},s.split=function(e){if(this.len<2)return null;var t;this.tail.node.getPosition().add(new d(1,0,0)).equals(this.tail.prev.node.getPosition())?t=$a.LEFT:this.tail.node.getPosition().add(new d(-1,0,0)).equals(this.tail.prev.node.getPosition())?t=$a.RIGHT:this.tail.node.getPosition().add(new d(0,1,0)).equals(this.tail.prev.node.getPosition())?t=$a.DOWN:this.tail.node.getPosition().add(new d(0,-1,0)).equals(this.tail.prev.node.getPosition())&&(t=$a.UP);var n=u(this.snake_pref).getComponent(i);switch(n.id=e,n.node.setPosition(new d(0,0,0)),n.node.setParent(this.node.parent),n.node.active=!0,n.team=this.team,this.len){case 2:var a=this.tail.node.getPosition();this.head.next=null,this.tail.prev=null,this.tail.node.active=!1,this.tail=null,this.len=1,n.head=new g,n.head.node=u(this.head_pref),n.head.node.setPosition(a),n.head.node.active=!0,n.head.next=null,n.tail=null,n.len=1;break;case 3:var o=this.tail.node.getPosition(),s=this.head.next.node.getPosition();this.tail.node.active=!1,this.tail.destroy(),this.tail=new g,this.tail.node=u(this.tail_pref),this.tail.node.setPosition(s),this.tail.node.setParent(this.node),this.tail.node.active=!0,this.head.prev=null,this.head.next.node.active=!1,this.head.next=this.tail,this.tail.prev=this.head,this.tail.next=null,this.len=2,n.head=new g,n.head.node=u(this.head_pref),n.head.node.setPosition(o),n.head.node.active=!0,n.head.next=null,n.tail=null,n.len=1;break;case 4:var r=this.tail.node.getPosition(),l=this.tail.prev.node.getPosition(),_=this.head.next.node.getPosition();this.len=2,n.len=2,this.head.next.node.active=!1,this.tail.prev.node.active=!1,this.tail.node.active=!1,this.tail=new g,this.tail.node=u(this.tail_pref),this.tail.node.setPosition(_),this.head.next=this.tail,this.tail.prev=this.head,this.tail.next=null,n.head=new g,n.tail=new g,n.head.node=u(this.head_pref),n.tail.node=u(this.tail_pref),n.head.node.setPosition(r),n.tail.node.setPosition(l),n.head.next=n.tail,n.head.prev=null,n.tail.prev=n.head,n.tail.next=null;break;default:var h=this.tail,b=this.head;n.len=Math.floor(this.len/2),this.len=this.len-n.len;for(var w=0;w<this.len;w++)b=b.next;var p=b.prev;this.tail=new g,this.tail.node=u(this.tail_pref);var c=p.node.getPosition();this.tail.node.setPosition(c),this.tail.prev=p.prev,this.tail.prev.next=this.tail,this.tail.node.setParent(this.node),this.tail.next=null,p.node.active=!1;var m=b;n.tail=new g,n.tail.node=u(this.tail_pref);var f,q=m.node.getPosition();for(n.tail.node.setPosition(q),n.tail.node.active=!0,n.tail.node.setParent(n.node),n.tail.next=b.next,n.tail.next.prev=n.tail,n.tail.prev=null,m.node.active=!1,b=b.next;b!=h;)b.node.setParent(n.node),f=b.next,b.next=b.prev,b.prev=f,b=f;n.tail.prev=n.tail.next,n.tail.next=null,n.head=new g,n.head.node=u(this.head_pref);var y=h.node.getPosition();for(n.head.node.setPosition(y),n.head.node.setParent(n.node),n.head.prev=null,n.head.next=h.prev,n.head.node.active=!0,h.node.active=!1,b=n.head;b!=n.tail;)b=b.next;y=n.head.node.getPosition(),n.head.node.getPosition().add(new d(0,1,0)).equals(n.head.next.node.getPosition())?n.head_dir=$a.DOWN:n.head.node.getPosition().add(new d(0,-1,0)).equals(n.head.next.node.getPosition())?n.head_dir=$a.UP:n.head.node.getPosition().add(new d(-1,0,0)).equals(n.head.next.node.getPosition())?n.head_dir=$a.RIGHT:n.head.node.getPosition().add(new d(1,0,0)).equals(n.head.next.node.getPosition())?n.head_dir=$a.LEFT:console.log("head_dir error: new head:",n.head)}return n.length_bank=this.length_bank,this.length_bank=0,this.setSkin(),n.head_dir=t,n.setSkin(),n},s.melt=function(e){if(null==this.meltitem)return null;for(var t=0,i=0,n=0;n<16;n++)for(var a=0;a<16;a++){var o=e[n][a];if(o&&o.node){var s=o.node.getPosition(),r=this.head.node.getPosition();(this.head_dir==$a.UP&&s.x==r.x&&s.y>r.y||this.head_dir==$a.DOWN&&s.x==r.x&&s.y<r.y||this.head_dir==$a.LEFT&&s.y==r.y&&s.x<r.x||this.head_dir==$a.RIGHT&&s.y==r.y&&s.x>r.x)&&(1==o.team?++t:++i,o.node.active=!1,o.onDelete(),e[n][a]=null)}}return this.meltitem=null,this.setSkin(),{w1_cnt:t,w2_cnt:i}},s.onKilled=function(){this.node&&this.node.isValid&&this.node.destroy(),this.isValid&&this.destroy()},s.refreshSkinAfterMove=function(e){var t,i;t=0,null!=this.splititem&&(t+=1),null!=this.meltitem&&(t+=2);var n,a,o=this.head;if(o.node.active=!1,i=this.head.node.position,1==this.team){switch(t){case 0:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.bs_head_rightwards);break;case $a.DOWN:o.node=u(this.bs_head_downwards);break;case $a.LEFT:o.node=u(this.bs_head_leftwards);break;case $a.UP:o.node=u(this.bs_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.bs_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.bs_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.bs_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.bs_head_upwards));break;case 1:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.bsp_head_rightwards);break;case $a.DOWN:o.node=u(this.bsp_head_downwards);break;case $a.LEFT:o.node=u(this.bsp_head_leftwards);break;case $a.UP:o.node=u(this.bsp_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.bsp_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.bsp_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.bsp_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.bsp_head_upwards));break;case 2:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.bm_head_rightwards);break;case $a.DOWN:o.node=u(this.bm_head_downwards);break;case $a.LEFT:o.node=u(this.bm_head_leftwards);break;case $a.UP:o.node=u(this.bm_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.bm_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.bm_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.bm_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.bm_head_upwards));break;case 3:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.bb_head_rightwards);break;case $a.DOWN:o.node=u(this.bb_head_downwards);break;case $a.LEFT:o.node=u(this.bb_head_leftwards);break;case $a.UP:o.node=u(this.bb_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.bb_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.bb_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.bb_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.bb_head_upwards))}if(o.node.setPosition(i),o.node.setParent(this.node),o.node.active=!0,null!=this.tail){switch((o=this.tail).node.active=!1,i=this.tail.node.position,a=o.node.getPosition().subtract(o.prev.node.getPosition()),t){case 0:a.equals(new d(0,1,0))?o.node=u(this.bs_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.bs_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.bs_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.bs_tail_downwards));break;case 1:a.equals(new d(0,1,0))?o.node=u(this.bsp_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.bsp_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.bsp_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.bsp_tail_downwards));break;case 2:a.equals(new d(0,1,0))?o.node=u(this.bm_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.bm_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.bm_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.bm_tail_downwards));break;case 3:a.equals(new d(0,1,0))?o.node=u(this.bb_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.bb_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.bb_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.bb_tail_downwards))}o.node.setPosition(i),o.node.setParent(this.node),o.node.active=!0}if(null!=this.head.next&&this.head.next!=this.tail){switch(o=this.head.next,i=this.head.next.node.position,o.node.active=!1,n=o.next.node.getPosition().subtract(o.node.getPosition()),a=o.node.getPosition().subtract(o.prev.node.getPosition()),t){case 0:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.bs_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bs_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bs_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.bs_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bs_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bs_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.bs_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bs_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.bs_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.bs_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bs_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.bs_corner_top_left)));break;case 1:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.bsp_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bsp_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bsp_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.bsp_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bsp_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bsp_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.bsp_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bsp_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.bsp_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.bsp_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bsp_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.bsp_corner_top_left)));break;case 2:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.bm_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bm_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bm_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.bm_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bm_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bm_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.bm_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bm_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.bm_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.bm_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bm_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.bm_corner_top_left)));break;case 3:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.bb_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bb_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bb_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.bb_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.bb_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.bb_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.bb_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bb_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.bb_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.bb_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.bb_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.bb_corner_top_left)))}o.node.setPosition(i),o.node.setParent(this.node),o.node.active=!0}}else if(2==this.team){switch(t){case 0:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.ts_head_rightwards);break;case $a.DOWN:o.node=u(this.ts_head_downwards);break;case $a.LEFT:o.node=u(this.ts_head_leftwards);break;case $a.UP:o.node=u(this.ts_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.ts_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.ts_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.ts_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.ts_head_upwards));break;case 1:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.tsp_head_rightwards);break;case $a.DOWN:o.node=u(this.tsp_head_downwards);break;case $a.LEFT:o.node=u(this.tsp_head_leftwards);break;case $a.UP:o.node=u(this.tsp_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.tsp_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.tsp_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.tsp_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.tsp_head_upwards));break;case 2:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.tm_head_rightwards);break;case $a.DOWN:o.node=u(this.tm_head_downwards);break;case $a.LEFT:o.node=u(this.tm_head_leftwards);break;case $a.UP:o.node=u(this.tm_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.tm_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.tm_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.tm_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.tm_head_upwards));break;case 3:if(null==o.next)switch(e){case $a.RIGHT:o.node=u(this.tb_head_rightwards);break;case $a.DOWN:o.node=u(this.tb_head_downwards);break;case $a.LEFT:o.node=u(this.tb_head_leftwards);break;case $a.UP:o.node=u(this.tb_head_upwards)}else(n=o.next.node.getPosition().subtract(o.node.getPosition())).equals(new d(0,1,0))?o.node=u(this.tb_head_downwards):n.equals(new d(1,0,0))?o.node=u(this.tb_head_leftwards):n.equals(new d(-1,0,0))?o.node=u(this.tb_head_rightwards):n.equals(new d(0,-1,0))&&(o.node=u(this.tb_head_upwards))}if(o.node.setPosition(i),o.node.setParent(this.node),o.node.active=!0,null!=this.tail){switch((o=this.tail).node.active=!1,i=this.tail.node.position,a=o.node.getPosition().subtract(o.prev.node.getPosition()),t){case 0:a.equals(new d(0,1,0))?o.node=u(this.ts_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.ts_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.ts_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.ts_tail_downwards));break;case 1:a.equals(new d(0,1,0))?o.node=u(this.tsp_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.tsp_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.tsp_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.tsp_tail_downwards));break;case 2:a.equals(new d(0,1,0))?o.node=u(this.tm_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.tm_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.tm_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.tm_tail_downwards));break;case 3:a.equals(new d(0,1,0))?o.node=u(this.tb_tail_upwards):a.equals(new d(1,0,0))?o.node=u(this.tb_tail_rightwards):a.equals(new d(-1,0,0))?o.node=u(this.tb_tail_leftwards):a.equals(new d(0,-1,0))&&(o.node=u(this.tb_tail_downwards))}o.node.setPosition(i),o.node.setParent(this.node),o.node.active=!0}if(null!=this.head.next&&this.head.next!=this.tail){switch(o=this.head.next,i=this.head.next.node.position,o.node.active=!1,n=o.next.node.getPosition().subtract(o.node.getPosition()),a=o.node.getPosition().subtract(o.prev.node.getPosition()),t){case 0:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.ts_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.ts_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.ts_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.ts_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.ts_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.ts_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.ts_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.ts_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.ts_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.ts_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.ts_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.ts_corner_top_left)));break;case 1:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.tsp_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.tsp_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.tsp_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.tsp_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.tsp_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.tsp_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.tsp_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.tsp_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.tsp_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.tsp_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.tsp_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.tsp_corner_top_left)));break;case 2:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.tm_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.tm_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.tm_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.tm_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.tm_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.tm_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.tm_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.tm_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.tm_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.tm_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.tm_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.tm_corner_top_left)));break;case 3:a.equals(new d(0,1,0))?n.equals(new d(0,1,0))?o.node=u(this.tb_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.tb_corner_top_left):n.equals(new d(-1,0,0))&&(o.node=u(this.tb_corner_top_right)):a.equals(new d(0,-1,0))?n.equals(new d(0,-1,0))?o.node=u(this.tb_body_vertical):n.equals(new d(1,0,0))?o.node=u(this.tb_corner_bottom_left):n.equals(new d(-1,0,0))&&(o.node=u(this.tb_corner_bottom_right)):a.equals(new d(1,0,0))?n.equals(new d(1,0,0))?o.node=u(this.tb_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.tb_corner_bottom_right):n.equals(new d(0,-1,0))&&(o.node=u(this.tb_corner_top_right)):a.equals(new d(-1,0,0))&&(n.equals(new d(-1,0,0))?o.node=u(this.tb_body_horizontal):n.equals(new d(0,1,0))?o.node=u(this.tb_corner_bottom_left):n.equals(new d(0,-1,0))&&(o.node=u(this.tb_corner_top_left)))}o.node.setPosition(i),o.node.setParent(this.node),o.node.active=!0}}},s.setSkin=function(){var e,t=this.head_dir;if(e=0,null!=this.splititem&&(e+=1),null!=this.meltitem&&(e+=2),1!=this.len)switch(e){case 0:this.setSimpleSkin();break;case 1:this.setSplitSkin();break;case 2:this.setMeltSkin();break;case 3:this.setBothItemSkin()}else{var i=this.head.node.getPosition();switch(t){case $a.UP:this.head.node.active=!1,1==this.team?this.head.node=u(this.bs_head_upwards):2==this.team&&(this.head.node=u(this.ts_head_upwards)),this.head.node.setPosition(i),this.head.node.setParent(this.node);break;case $a.RIGHT:this.head.node.active=!1,1==this.team?this.head.node=u(this.bs_head_rightwards):2==this.team&&(this.head.node=u(this.ts_head_rightwards)),this.head.node.setPosition(i),this.head.node.setParent(this.node);break;case $a.DOWN:this.head.node.active=!1,1==this.team?this.head.node=u(this.bs_head_downwards):2==this.team&&(this.head.node=u(this.ts_head_downwards)),this.head.node.setPosition(i),this.head.node.setParent(this.node);break;case $a.LEFT:this.head.node.active=!1,1==this.team?this.head.node=u(this.bs_head_leftwards):2==this.team&&(this.head.node=u(this.ts_head_leftwards)),this.head.node.setPosition(i),this.head.node.setParent(this.node)}}},s.setSimpleSkin=function(){if(1==this.team)for(var e=this.head;null!=e;){var t=e.node.getPosition();e.node.active=!1,null!=e.next&&(i=e.next.node.getPosition().subtract(e.node.getPosition())),null!=e.prev&&(n=e.node.getPosition().subtract(e.prev.node.getPosition())),e==this.head?null==e.next?e.node=u(this.bs_head_rightwards):i.equals(new d(0,1,0))?e.node=u(this.bs_head_downwards):i.equals(new d(1,0,0))?e.node=u(this.bs_head_leftwards):i.equals(new d(-1,0,0))?e.node=u(this.bs_head_rightwards):i.equals(new d(0,-1,0))&&(e.node=u(this.bs_head_upwards)):e==this.tail?n.equals(new d(0,1,0))?e.node=u(this.bs_tail_upwards):n.equals(new d(1,0,0))?e.node=u(this.bs_tail_rightwards):n.equals(new d(-1,0,0))?e.node=u(this.bs_tail_leftwards):n.equals(new d(0,-1,0))&&(e.node=u(this.bs_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?e.node=u(this.bs_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bs_corner_top_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bs_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?e.node=u(this.bs_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bs_corner_bottom_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bs_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?e.node=u(this.bs_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bs_corner_bottom_right):i.equals(new d(0,-1,0))&&(e.node=u(this.bs_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?e.node=u(this.bs_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bs_corner_bottom_left):i.equals(new d(0,-1,0))&&(e.node=u(this.bs_corner_top_left))),e.node.setParent(this.node),e.node.setPosition(t),e.node.active=!0,e=e.next}else if(2==this.team)for(var i,n,a=this.head;null!=a;){var o=a.node.getPosition();a.node.active=!1,null!=a.next&&(i=a.next.node.getPosition().subtract(a.node.getPosition())),null!=a.prev&&(n=a.node.getPosition().subtract(a.prev.node.getPosition())),a==this.head?null==a.next?a.node=u(this.ts_head_rightwards):i.equals(new d(0,1,0))?a.node=u(this.ts_head_downwards):i.equals(new d(1,0,0))?a.node=u(this.ts_head_leftwards):i.equals(new d(-1,0,0))?a.node=u(this.ts_head_rightwards):i.equals(new d(0,-1,0))&&(a.node=u(this.ts_head_upwards)):a==this.tail?n.equals(new d(0,1,0))?a.node=u(this.ts_tail_upwards):n.equals(new d(1,0,0))?a.node=u(this.ts_tail_rightwards):n.equals(new d(-1,0,0))?a.node=u(this.ts_tail_leftwards):n.equals(new d(0,-1,0))&&(a.node=u(this.ts_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?a.node=u(this.ts_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.ts_corner_top_left):i.equals(new d(-1,0,0))&&(a.node=u(this.ts_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?a.node=u(this.ts_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.ts_corner_bottom_left):i.equals(new d(-1,0,0))&&(a.node=u(this.ts_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?a.node=u(this.ts_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.ts_corner_bottom_right):i.equals(new d(0,-1,0))&&(a.node=u(this.ts_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?a.node=u(this.ts_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.ts_corner_bottom_left):i.equals(new d(0,-1,0))&&(a.node=u(this.ts_corner_top_left))),a.node.setParent(this.node),a.node.setPosition(o),a.node.active=!0,a=a.next}},s.setSplitSkin=function(){if(1==this.team)for(var e=this.head;null!=e;){var t=e.node.getPosition();e.node.active=!1,null!=e.next&&(i=e.next.node.getPosition().subtract(e.node.getPosition())),null!=e.prev&&(n=e.node.getPosition().subtract(e.prev.node.getPosition())),e==this.head?null==e.next?e.node=u(this.bsp_head_rightwards):i.equals(new d(0,1,0))?e.node=u(this.bsp_head_downwards):i.equals(new d(1,0,0))?e.node=u(this.bsp_head_leftwards):i.equals(new d(-1,0,0))?e.node=u(this.bsp_head_rightwards):i.equals(new d(0,-1,0))&&(e.node=u(this.bsp_head_upwards)):e==this.tail?n.equals(new d(0,1,0))?e.node=u(this.bsp_tail_upwards):n.equals(new d(1,0,0))?e.node=u(this.bsp_tail_rightwards):n.equals(new d(-1,0,0))?e.node=u(this.bsp_tail_leftwards):n.equals(new d(0,-1,0))&&(e.node=u(this.bsp_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?e.node=u(this.bsp_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bsp_corner_top_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bsp_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?e.node=u(this.bsp_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bsp_corner_bottom_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bsp_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?e.node=u(this.bsp_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bsp_corner_bottom_right):i.equals(new d(0,-1,0))&&(e.node=u(this.bsp_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?e.node=u(this.bsp_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bsp_corner_bottom_left):i.equals(new d(0,-1,0))&&(e.node=u(this.bsp_corner_top_left))),e.node.setParent(this.node),e.node.setPosition(t),e.node.active=!0,e=e.next}else if(2==this.team)for(var i,n,a=this.head;null!=a;){var o=a.node.getPosition();a.node.active=!1,null!=a.next&&(i=a.next.node.getPosition().subtract(a.node.getPosition())),null!=a.prev&&(n=a.node.getPosition().subtract(a.prev.node.getPosition())),a==this.head?null==a.next?a.node=u(this.tsp_head_rightwards):i.equals(new d(0,1,0))?a.node=u(this.tsp_head_downwards):i.equals(new d(1,0,0))?a.node=u(this.tsp_head_leftwards):i.equals(new d(-1,0,0))?a.node=u(this.tsp_head_rightwards):i.equals(new d(0,-1,0))&&(a.node=u(this.tsp_head_upwards)):a==this.tail?n.equals(new d(0,1,0))?a.node=u(this.tsp_tail_upwards):n.equals(new d(1,0,0))?a.node=u(this.tsp_tail_rightwards):n.equals(new d(-1,0,0))?a.node=u(this.tsp_tail_leftwards):n.equals(new d(0,-1,0))&&(a.node=u(this.tsp_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?a.node=u(this.tsp_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.tsp_corner_top_left):i.equals(new d(-1,0,0))&&(a.node=u(this.tsp_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?a.node=u(this.tsp_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.tsp_corner_bottom_left):i.equals(new d(-1,0,0))&&(a.node=u(this.tsp_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?a.node=u(this.tsp_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.tsp_corner_bottom_right):i.equals(new d(0,-1,0))&&(a.node=u(this.tsp_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?a.node=u(this.tsp_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.tsp_corner_bottom_left):i.equals(new d(0,-1,0))&&(a.node=u(this.tsp_corner_top_left))),a.node.setParent(this.node),a.node.setPosition(o),a.node.active=!0,a=a.next}},s.setMeltSkin=function(){if(1==this.team)for(var e=this.head;null!=e;){var t=e.node.getPosition();e.node.active=!1,null!=e.next&&(i=e.next.node.getPosition().subtract(e.node.getPosition())),null!=e.prev&&(n=e.node.getPosition().subtract(e.prev.node.getPosition())),e==this.head?null==e.next?e.node=u(this.bm_head_rightwards):i.equals(new d(0,1,0))?e.node=u(this.bm_head_downwards):i.equals(new d(1,0,0))?e.node=u(this.bm_head_leftwards):i.equals(new d(-1,0,0))?e.node=u(this.bm_head_rightwards):i.equals(new d(0,-1,0))&&(e.node=u(this.bm_head_upwards)):e==this.tail?n.equals(new d(0,1,0))?e.node=u(this.bm_tail_upwards):n.equals(new d(1,0,0))?e.node=u(this.bm_tail_rightwards):n.equals(new d(-1,0,0))?e.node=u(this.bm_tail_leftwards):n.equals(new d(0,-1,0))&&(e.node=u(this.bm_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?e.node=u(this.bm_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bm_corner_top_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bm_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?e.node=u(this.bm_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bm_corner_bottom_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bm_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?e.node=u(this.bm_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bm_corner_bottom_right):i.equals(new d(0,-1,0))&&(e.node=u(this.bm_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?e.node=u(this.bm_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bm_corner_bottom_left):i.equals(new d(0,-1,0))&&(e.node=u(this.bm_corner_top_left))),e.node.setParent(this.node),e.node.setPosition(t),e.node.active=!0,e=e.next}else if(2==this.team)for(var i,n,a=this.head;null!=a;){var o=a.node.getPosition();a.node.active=!1,null!=a.next&&(i=a.next.node.getPosition().subtract(a.node.getPosition())),null!=a.prev&&(n=a.node.getPosition().subtract(a.prev.node.getPosition())),a==this.head?null==a.next?a.node=u(this.tm_head_rightwards):i.equals(new d(0,1,0))?a.node=u(this.tm_head_downwards):i.equals(new d(1,0,0))?a.node=u(this.tm_head_leftwards):i.equals(new d(-1,0,0))?a.node=u(this.tm_head_rightwards):i.equals(new d(0,-1,0))&&(a.node=u(this.tm_head_upwards)):a==this.tail?n.equals(new d(0,1,0))?a.node=u(this.tm_tail_upwards):n.equals(new d(1,0,0))?a.node=u(this.tm_tail_rightwards):n.equals(new d(-1,0,0))?a.node=u(this.tm_tail_leftwards):n.equals(new d(0,-1,0))&&(a.node=u(this.tm_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?a.node=u(this.tm_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.tm_corner_top_left):i.equals(new d(-1,0,0))&&(a.node=u(this.tm_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?a.node=u(this.tm_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.tm_corner_bottom_left):i.equals(new d(-1,0,0))&&(a.node=u(this.tm_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?a.node=u(this.tm_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.tm_corner_bottom_right):i.equals(new d(0,-1,0))&&(a.node=u(this.tm_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?a.node=u(this.tm_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.tm_corner_bottom_left):i.equals(new d(0,-1,0))&&(a.node=u(this.tm_corner_top_left))),a.node.setParent(this.node),a.node.setPosition(o),a.node.active=!0,a=a.next}},s.setBothItemSkin=function(){if(1==this.team)for(var e=this.head;null!=e;){var t=e.node.getPosition();e.node.active=!1,null!=e.next&&(i=e.next.node.getPosition().subtract(e.node.getPosition())),null!=e.prev&&(n=e.node.getPosition().subtract(e.prev.node.getPosition())),e==this.head?null==e.next?e.node=u(this.bb_head_rightwards):i.equals(new d(0,1,0))?e.node=u(this.bb_head_downwards):i.equals(new d(1,0,0))?e.node=u(this.bb_head_leftwards):i.equals(new d(-1,0,0))?e.node=u(this.bb_head_rightwards):i.equals(new d(0,-1,0))&&(e.node=u(this.bb_head_upwards)):e==this.tail?n.equals(new d(0,1,0))?e.node=u(this.bb_tail_upwards):n.equals(new d(1,0,0))?e.node=u(this.bb_tail_rightwards):n.equals(new d(-1,0,0))?e.node=u(this.bb_tail_leftwards):n.equals(new d(0,-1,0))&&(e.node=u(this.bb_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?e.node=u(this.bb_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bb_corner_top_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bb_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?e.node=u(this.bb_body_vertical):i.equals(new d(1,0,0))?e.node=u(this.bb_corner_bottom_left):i.equals(new d(-1,0,0))&&(e.node=u(this.bb_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?e.node=u(this.bb_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bb_corner_bottom_right):i.equals(new d(0,-1,0))&&(e.node=u(this.bb_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?e.node=u(this.bb_body_horizontal):i.equals(new d(0,1,0))?e.node=u(this.bb_corner_bottom_left):i.equals(new d(0,-1,0))&&(e.node=u(this.bb_corner_top_left))),e.node.setParent(this.node),e.node.setPosition(t),e.node.active=!0,e=e.next}else if(2==this.team)for(var i,n,a=this.head;null!=a;){var o=a.node.getPosition();a.node.active=!1,null!=a.next&&(i=a.next.node.getPosition().subtract(a.node.getPosition())),null!=a.prev&&(n=a.node.getPosition().subtract(a.prev.node.getPosition())),a==this.head?null==a.next?a.node=u(this.tb_head_rightwards):i.equals(new d(0,1,0))?a.node=u(this.tb_head_downwards):i.equals(new d(1,0,0))?a.node=u(this.tb_head_leftwards):i.equals(new d(-1,0,0))?a.node=u(this.tb_head_rightwards):i.equals(new d(0,-1,0))&&(a.node=u(this.tb_head_upwards)):a==this.tail?n.equals(new d(0,1,0))?a.node=u(this.tb_tail_upwards):n.equals(new d(1,0,0))?a.node=u(this.tb_tail_rightwards):n.equals(new d(-1,0,0))?a.node=u(this.tb_tail_leftwards):n.equals(new d(0,-1,0))&&(a.node=u(this.tb_tail_downwards)):n.equals(new d(0,1,0))?i.equals(new d(0,1,0))?a.node=u(this.tb_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.tb_corner_top_left):i.equals(new d(-1,0,0))&&(a.node=u(this.tb_corner_top_right)):n.equals(new d(0,-1,0))?i.equals(new d(0,-1,0))?a.node=u(this.tb_body_vertical):i.equals(new d(1,0,0))?a.node=u(this.tb_corner_bottom_left):i.equals(new d(-1,0,0))&&(a.node=u(this.tb_corner_bottom_right)):n.equals(new d(1,0,0))?i.equals(new d(1,0,0))?a.node=u(this.tb_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.tb_corner_bottom_right):i.equals(new d(0,-1,0))&&(a.node=u(this.tb_corner_top_right)):n.equals(new d(-1,0,0))&&(i.equals(new d(-1,0,0))?a.node=u(this.tb_body_horizontal):i.equals(new d(0,1,0))?a.node=u(this.tb_corner_bottom_left):i.equals(new d(0,-1,0))&&(a.node=u(this.tb_corner_top_left))),a.node.setParent(this.node),a.node.setPosition(o),a.node.active=!0,a=a.next}},s.init_blink=function(){var e=this.opacityComp.opacity;this.tween=w(this.opacityComp).to(.25,{opacity:70}).to(.25,{opacity:e}).union().repeatForever()},s.blink=function(e){e&&this.tween.start()},s.reset_blink=function(){this.tween.stop(),this.opacityComp.opacity=255},i}(p)).prototype,"body_pref",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hi=i(_i.prototype,"head_pref",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=i(_i.prototype,"tail_pref",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ui=i(_i.prototype,"snake_pref",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wi=i(_i.prototype,"wp_body_horizontal",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pi=i(_i.prototype,"wp_body_vertical",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ci=i(_i.prototype,"wp_corner_top_left",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mi=i(_i.prototype,"wp_corner_top_right",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=i(_i.prototype,"wp_corner_bottom_left",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=i(_i.prototype,"wp_corner_bottom_right",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qi=i(_i.prototype,"wp_head_upwards",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi=i(_i.prototype,"wp_head_rightwards",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=i(_i.prototype,"wp_head_downwards",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zi=i(_i.prototype,"wp_head_leftwards",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=i(_i.prototype,"wp_tail_upwards",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ki=i(_i.prototype,"wp_tail_rightwards",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xi=i(_i.prototype,"wp_tail_downwards",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ti=i(_i.prototype,"wp_tail_leftwards",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ii=i(_i.prototype,"bs_body_horizontal",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oi=i(_i.prototype,"bs_body_vertical",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=i(_i.prototype,"bs_corner_top_left",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Di=i(_i.prototype,"bs_corner_top_right",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni=i(_i.prototype,"bs_corner_bottom_left",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ei=i(_i.prototype,"bs_corner_bottom_right",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fi=i(_i.prototype,"bs_head_upwards",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Li=i(_i.prototype,"bs_head_rightwards",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hi=i(_i.prototype,"bs_head_downwards",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ri=i(_i.prototype,"bs_head_leftwards",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ui=i(_i.prototype,"bs_tail_upwards",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi=i(_i.prototype,"bs_tail_rightwards",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gi=i(_i.prototype,"bs_tail_downwards",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ci=i(_i.prototype,"bs_tail_leftwards",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=i(_i.prototype,"bsp_body_horizontal",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vi=i(_i.prototype,"bsp_body_vertical",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bi=i(_i.prototype,"bsp_corner_top_left",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ai=i(_i.prototype,"bsp_corner_top_right",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ki=i(_i.prototype,"bsp_corner_bottom_left",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ji=i(_i.prototype,"bsp_corner_bottom_right",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ji=i(_i.prototype,"bsp_head_upwards",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qi=i(_i.prototype,"bsp_head_rightwards",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xi=i(_i.prototype,"bsp_head_downwards",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yi=i(_i.prototype,"bsp_head_leftwards",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zi=i(_i.prototype,"bsp_tail_upwards",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$i=i(_i.prototype,"bsp_tail_rightwards",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=i(_i.prototype,"bsp_tail_downwards",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=i(_i.prototype,"bsp_tail_leftwards",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=i(_i.prototype,"bm_body_horizontal",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=i(_i.prototype,"bm_body_vertical",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=i(_i.prototype,"bm_corner_top_left",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=i(_i.prototype,"bm_corner_top_right",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=i(_i.prototype,"bm_corner_bottom_left",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln=i(_i.prototype,"bm_corner_bottom_right",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_n=i(_i.prototype,"bm_head_upwards",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dn=i(_i.prototype,"bm_head_rightwards",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hn=i(_i.prototype,"bm_head_downwards",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn=i(_i.prototype,"bm_head_leftwards",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=i(_i.prototype,"bm_tail_upwards",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn=i(_i.prototype,"bm_tail_rightwards",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pn=i(_i.prototype,"bm_tail_downwards",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=i(_i.prototype,"bm_tail_leftwards",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn=i(_i.prototype,"bb_body_horizontal",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn=i(_i.prototype,"bb_body_vertical",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn=i(_i.prototype,"bb_corner_top_left",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn=i(_i.prototype,"bb_corner_top_right",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yn=i(_i.prototype,"bb_corner_bottom_left",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vn=i(_i.prototype,"bb_corner_bottom_right",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zn=i(_i.prototype,"bb_head_upwards",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn=i(_i.prototype,"bb_head_rightwards",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=i(_i.prototype,"bb_head_downwards",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xn=i(_i.prototype,"bb_head_leftwards",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tn=i(_i.prototype,"bb_tail_upwards",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In=i(_i.prototype,"bb_tail_rightwards",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),On=i(_i.prototype,"bb_tail_downwards",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn=i(_i.prototype,"bb_tail_leftwards",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dn=i(_i.prototype,"ts_body_horizontal",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=i(_i.prototype,"ts_body_vertical",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),En=i(_i.prototype,"ts_corner_top_left",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn=i(_i.prototype,"ts_corner_top_right",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln=i(_i.prototype,"ts_corner_bottom_left",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn=i(_i.prototype,"ts_corner_bottom_right",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rn=i(_i.prototype,"ts_head_upwards",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Un=i(_i.prototype,"ts_head_rightwards",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wn=i(_i.prototype,"ts_head_downwards",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gn=i(_i.prototype,"ts_head_leftwards",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cn=i(_i.prototype,"ts_tail_upwards",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn=i(_i.prototype,"ts_tail_rightwards",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vn=i(_i.prototype,"ts_tail_downwards",[Ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bn=i(_i.prototype,"ts_tail_leftwards",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),An=i(_i.prototype,"tsp_body_horizontal",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kn=i(_i.prototype,"tsp_body_vertical",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jn=i(_i.prototype,"tsp_corner_top_left",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jn=i(_i.prototype,"tsp_corner_top_right",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qn=i(_i.prototype,"tsp_corner_bottom_left",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn=i(_i.prototype,"tsp_corner_bottom_right",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yn=i(_i.prototype,"tsp_head_upwards",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zn=i(_i.prototype,"tsp_head_rightwards",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$n=i(_i.prototype,"tsp_head_downwards",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ea=i(_i.prototype,"tsp_head_leftwards",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ta=i(_i.prototype,"tsp_tail_upwards",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ia=i(_i.prototype,"tsp_tail_rightwards",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),na=i(_i.prototype,"tsp_tail_downwards",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aa=i(_i.prototype,"tsp_tail_leftwards",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oa=i(_i.prototype,"tm_body_horizontal",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sa=i(_i.prototype,"tm_body_vertical",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ra=i(_i.prototype,"tm_corner_top_left",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),la=i(_i.prototype,"tm_corner_top_right",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_a=i(_i.prototype,"tm_corner_bottom_left",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),da=i(_i.prototype,"tm_corner_bottom_right",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ha=i(_i.prototype,"tm_head_upwards",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=i(_i.prototype,"tm_head_rightwards",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ua=i(_i.prototype,"tm_head_downwards",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=i(_i.prototype,"tm_head_leftwards",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa=i(_i.prototype,"tm_tail_upwards",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ca=i(_i.prototype,"tm_tail_rightwards",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma=i(_i.prototype,"tm_tail_downwards",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ga=i(_i.prototype,"tm_tail_leftwards",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa=i(_i.prototype,"tb_body_horizontal",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qa=i(_i.prototype,"tb_body_vertical",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya=i(_i.prototype,"tb_corner_top_left",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va=i(_i.prototype,"tb_corner_top_right",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),za=i(_i.prototype,"tb_corner_bottom_left",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pa=i(_i.prototype,"tb_corner_bottom_right",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ka=i(_i.prototype,"tb_head_upwards",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=i(_i.prototype,"tb_head_rightwards",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ta=i(_i.prototype,"tb_head_downwards",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ia=i(_i.prototype,"tb_head_leftwards",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oa=i(_i.prototype,"tb_tail_upwards",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa=i(_i.prototype,"tb_tail_rightwards",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Da=i(_i.prototype,"tb_tail_downwards",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na=i(_i.prototype,"tb_tail_leftwards",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ea=i(_i.prototype,"minisnake_blue_h",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa=i(_i.prototype,"minisnake_blue_v",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),La=i(_i.prototype,"minisnake_blue_head_down",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ha=i(_i.prototype,"minisnake_blue_head_up",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ra=i(_i.prototype,"minisnake_blue_head_right",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ua=i(_i.prototype,"minisnake_blue_head_left",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wa=i(_i.prototype,"minisnake_blue_leftup",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ga=i(_i.prototype,"minisnake_blue_leftdown",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ca=i(_i.prototype,"minisnake_blue_rightup",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ma=i(_i.prototype,"minisnake_blue_rightdown",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Va=i(_i.prototype,"minisnake_green_h",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ba=i(_i.prototype,"minisnake_green_v",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa=i(_i.prototype,"minisnake_green_head_down",[ei],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ka=i(_i.prototype,"minisnake_green_head_up",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ja=i(_i.prototype,"minisnake_green_head_right",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ja=i(_i.prototype,"minisnake_green_head_left",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qa=i(_i.prototype,"minisnake_green_leftup",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xa=i(_i.prototype,"minisnake_green_leftdown",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ya=i(_i.prototype,"minisnake_green_rightup",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Za=i(_i.prototype,"minisnake_green_rightdown",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),li=_i))||li));s._RF.pop()}}}));

System.register("chunks:///_virtual/slider.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./generator.ts"],(function(t){"use strict";var e,r,n,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component},function(t){i=t.Generator}],execute:function(){var c;r._RF.push({},"543f3GdZwZPGZ5bGI5u8emw","slider",void 0);var s=n.ccclass;n.property,t("Slider",s("Slider")(c=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.start=function(){},n.changeMinimap=function(t){new i},r}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/equipment_column.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,o,l,r,a,s,p,m,c,u,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.defineProperty},function(e){r=e.cclegacy,a=e._decorator,s=e.Prefab,p=e.Vec3,m=e.Label,c=e.Sprite,u=e.resources,h=e.SpriteFrame,g=e.Component}],execute:function(){var _,d,f,b,y,k;r._RF.push({},"871840u1+ZD05wmjm9YoOfE","equipment_column",void 0);var C=a.ccclass,F=a.property;e("Equipment_column",(_=C("Equipment_column"),d=F(s),_((y=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(o(t),"equip_pref",y,o(t)),i(o(t),"init_pos",k,o(t)),l(o(t),"lenbank",null),l(o(t),"splitparam",null),l(o(t),"meltparam",null),l(o(t),"lenicon",null),l(o(t),"spliticon",null),l(o(t),"melticon",null),l(o(t),"blank_path","Progress/progress_stage_dot_night/spriteFrame"),l(o(t),"elong_path","textures/currency_style3_coin/spriteFrame"),l(o(t),"split_path","Icons/icon_big_elixir/spriteFrame"),l(o(t),"melt_path","textures/melt/spriteFrame"),t}n(t,e);var r=t.prototype;return r.onLoad=function(){},r.start=function(){this.lenbank=this.node.getChildByName("lengthbank").getComponent(m),this.splitparam=this.node.getChildByName("splitparam").getComponent(m),this.meltparam=this.node.getChildByName("meltparam").getComponent(m),this.lenicon=this.node.getChildByName("equipment_elong").getComponent(c),this.spliticon=this.node.getChildByName("equipment_split").getComponent(c),this.melticon=this.node.getChildByName("equipment_melt").getComponent(c)},r.Show_Equipment=function(e){var t=this;e.length_bank>0?(u.load(this.elong_path,h,(function(e,n){e&&console.log("error load..."),t.lenicon.spriteFrame=n})),this.lenbank.string=""+e.length_bank):0==e.length_bank&&(u.load(this.blank_path,h,(function(e,n){e&&console.log("error load..."),t.lenicon.spriteFrame=n})),this.lenbank.string=""),null==e.splititem?(u.load(this.blank_path,h,(function(e,n){e&&console.log("error load..."),t.spliticon.spriteFrame=n})),this.splitparam.string=""):(u.load(this.split_path,h,(function(e,n){e&&console.log("error load..."),t.spliticon.spriteFrame=n})),this.splitparam.string=""+e.splititem.param),null==e.meltitem?(u.load(this.blank_path,h,(function(e,n){e&&console.log("error load..."),t.melticon.spriteFrame=n})),this.meltparam.string=""):(u.load(this.melt_path,h,(function(e,n){e&&console.log("error load..."),t.melticon.spriteFrame=n})),this.meltparam.string=""+e.meltitem.param)},t}(g)).prototype,"equip_pref",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(b.prototype,"init_pos",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0,0)}}),f=b))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/logic.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./item.ts","./miniitem.ts","./help.ts","./bodynode.ts","./snake.ts","./generator.ts","./equipment_column.ts","./Info.ts","./Info2.ts"],(function(e){"use strict";var t,i,n,s,a,o,r,l,_,h,m,u,d,f,p,c,g,k,b,v,w,y,x,E,S,P,C,q,N,I,B,O,T,U,D,M,R,L,A,W;return{setters:[function(e){t=e.defineProperty,i=e.inheritsLoose,n=e.applyDecoratedDescriptor,s=e.assertThisInitialized,a=e.wrapNativeSuper,o=e.initializerDefineProperty,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,_=e._decorator,h=e.Prefab,m=e.Node,u=e.ParticleSystem2D,d=e.JsonAsset,f=e.SpriteFrame,p=e.systemEvent,c=e.SystemEvent,g=e.instantiate,k=e.Vec3,b=e.UITransform,v=e.Slider,w=e.Label,y=e.Button,x=e.Sprite,E=e.resources,S=e.EditBox,P=e.KeyCode,C=e.Component},function(e){q=e.itemType,N=e.Item,I=e.item_info},function(e){B=e.Miniitem},function(e){O=e.Help},function(e){T=e.BodyNode},function(e){U=e.Snake,D=e.move_dir,M=e.operation_type},function(e){R=e.Generator},function(e){L=e.Equipment_column},function(e){A=e.DeltaInfo},function(e){W=e.Info2}],execute:function(){var K,F,Y,z,H,J,V,j,G,Z,Q,X,$,ee,te,ie,ne,se,ae,oe,re,le,_e,he,me,ue,de,fe,pe,ce,ge;l._RF.push({},"9fdfb1w4yhMqrZAnq4IKVH6","logic",void 0);var ke=_.ccclass,be=_.property,ve=e("SnakeJson",(function(){t(this,"id",void 0),t(this,"team",void 0),t(this,"head_dir",void 0),t(this,"nodes",[]),t(this,"split",void 0),t(this,"melt",void 0),t(this,"length_bank",void 0),t(this,"extra_length_bank",void 0)})),we=e("InfoJson",(function(){t(this,"total_num",void 0),t(this,"cur_id",void 0),t(this,"cur_area",void 0),t(this,"total_area",void 0),t(this,"total_lenbank",void 0),t(this,"total_melt",void 0),t(this,"total_split",void 0)})),ye=e("Frame",(function(){t(this,"half",void 0),t(this,"cur_round",void 0),t(this,"first",void 0),t(this,"cur_snake",void 0),t(this,"cur_team",void 0),t(this,"round_info_parsed",void 0),t(this,"snake1",[]),t(this,"snake2",[]),t(this,"items",[]),t(this,"wall1",[]),t(this,"wall2",[]),t(this,"info1",void 0),t(this,"info2",void 0)}));e("RoundInfo",(function(){t(this,"gotten_item",[]),t(this,"expired_item",[])})),e("ProcessedOperation",function(e){function n(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,t(s(i),"basic",void 0),t(s(i),"dead_snake",[]),t(s(i),"should_solid",void 0),t(s(i),"extra_solid_area",[]),t(s(i),"got_item",void 0),t(s(i),"new_snake_id",void 0),t(s(i),"extra_length",void 0),i}return i(n,e),n}(a(Object))),e("Logic",(K=ke("Logic"),F=be(h),Y=be(h),z=be(h),H=be(h),J=be({type:h}),V=be({type:R}),j=be({type:m}),G=be({type:u}),Z=be({type:d}),Q=be({type:f}),X=be({type:f}),$=be({type:O}),ee=be({type:m}),K((ne=n((ie=function(e){function n(){for(var i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a))||this,o(s(i),"snake_pref",ne,s(i)),o(s(i),"mini_item",se,s(i)),o(s(i),"mini_item2",ae,s(i)),o(s(i),"mini_item3",oe,s(i)),o(s(i),"food_prfb",re,s(i)),o(s(i),"gen",le,s(i)),o(s(i),"ui",_e,s(i)),t(s(i),"cur_equipment",null),t(s(i),"slider_progress",null),t(s(i),"round_label",null),t(s(i),"directions",null),t(s(i),"playback",null),t(s(i),"Up",null),t(s(i),"Down",null),t(s(i),"Left",null),t(s(i),"Right",null),t(s(i),"infotab",null),t(s(i),"death_target",null),t(s(i),"default_forward_round",5),t(s(i),"current_forward_round",5),o(s(i),"mapWidth",he,s(i)),o(s(i),"mapHeight",me,s(i)),t(s(i),"minimap_rate",62/15),t(s(i),"minimap_x",void 0),t(s(i),"minimap_y",void 0),t(s(i),"minimap_height",void 0),t(s(i),"minimap_width",void 0),t(s(i),"minimap",void 0),t(s(i),"minimap_item_node",void 0),t(s(i),"minimap_snake_node",void 0),t(s(i),"editbox",void 0),t(s(i),"slider_minimap",void 0),t(s(i),"mini_items",void 0),o(s(i),"melter",ue,s(i)),t(s(i),"snake_miniinfo",void 0),t(s(i),"snake_miniinfo_text",void 0),t(s(i),"s1",null),t(s(i),"s2",null),t(s(i),"snakes",[]),t(s(i),"s1_cnt",0),t(s(i),"s2_cnt",0),t(s(i),"winner",-1),t(s(i),"round_max",512),t(s(i),"frame_cnt",0),t(s(i),"cur_round",1),t(s(i),"cur_frame",0),t(s(i),"cur_snake",null),t(s(i),"round_info_parsed",!1),t(s(i),"half",0),t(s(i),"first",1),t(s(i),"cur_team",1),t(s(i),"my_team",1),t(s(i),"can_press",!0),t(s(i),"can_operate",!0),t(s(i),"ws",void 0),t(s(i),"tokenB64",void 0),t(s(i),"online_mode",void 0),t(s(i),"yellow_info",void 0),t(s(i),"blue_info",void 0),o(s(i),"delta_file",de,s(i)),t(s(i),"offline_file",void 0),t(s(i),"item_list",[]),t(s(i),"round_infos",[]),t(s(i),"end_info",null),t(s(i),"po",[]),t(s(i),"handler",void 0),t(s(i),"playing",!1),t(s(i),"play_btn",void 0),o(s(i),"play_sprite",fe,s(i)),o(s(i),"pause_sprite",pe,s(i)),t(s(i),"minimap_handle_moved",void 0),o(s(i),"helper",ce,s(i)),o(s(i),"helper_btn",ge,s(i)),i}i(n,e);var a=n.prototype;return a.start=function(){console.log("Ia6e55e945"),this.init_obj(),this.config_file(),this.init_ui(),this.init_anim(),this.init_help(),p.on(c.EventType.KEY_DOWN,this.onKeyDown,this),p.on(c.EventType.KEY_UP,this.onKeyUp,this),this.init_info(),window.saiblo&&window.saiblo.token&&(this.infotab.init(),this.online_mode=!0,this.directions.active=!0,this.websocket(window.saiblo.token),this.playback.active=!1),window.saiblo&&window.saiblo.replay&&(this.online_mode=!1,this.load_replay(window.saiblo.replay),window.saiblo.players&&(this.yellow_info.string=window.saiblo.players[0],this.blue_info.string=window.saiblo.players[1],console.log("get team:",this.yellow_info.string,this.blue_info.string)))},a.init_help=function(){var e=g(this.snake_pref),t=e.getComponent(U);t.id=37,t.team=1,t.length_bank=15,t.head_dir=D.DOWN,e.setParent(this.helper.node),e.name="snake0",t.head.node.setPosition(this.mapWidth-1,0,0),t.move(D.UP,null,!1),t.move(D.UP,null,!1),t.move(D.LEFT,null,!1),t.move(D.LEFT,null,!1),t.move(D.LEFT,null,!1),t.move(D.LEFT,null,!1),t.move(D.DOWN,null,!1),t.move(D.RIGHT,null,!1),t.setSkin(),this.helper.snake=t.node},a.help=function(){this.helper.node.active=!0,this.helper.help(this.online_mode),0!=this.helper.state?this.helper_btn.active=!1:(this.helper_btn.active=!0,this.helper.node.active=!1)},a.init_obj=function(){var e=g(this.snake_pref),t=e.getComponent(U);t.id=0,t.team=1,t.extra_length_bank=8,t.head_dir=D.DOWN,e.setParent(this.node),e.name="snake0",t.head.node.setPosition(0,this.mapHeight-1,0),t.setSkin(),this.Add_Snake_Event(t),this.s1=t,this.snakes.push(t),this.s1_cnt++;var i=g(this.snake_pref),n=i.getComponent(U);n.id=1,n.team=2,n.extra_length_bank=8,n.head_dir=D.UP,i.setParent(this.node),i.name="snake1",n.head.node.setPosition(this.mapWidth-1,0,0),n.setSkin(),this.Add_Snake_Event(n),this.s2=n,this.snakes.push(n),this.s2_cnt++,this.cur_snake=t,this.gen.node.setPosition(new k(0,0,0));var s=this.ui.getChildByName("Minimap");this.minimap_x=s.position.x,this.minimap_y=s.position.y,this.minimap_width=s.getComponent(b).contentSize.width,this.minimap_height=s.getComponent(b).contentSize.height},a.init_ui=function(){var e=this;this.cur_equipment=this.ui.getChildByName("Equipments").getChildByName("Column").getComponent(L),this.slider_progress=this.ui.getChildByName("Playback").getChildByName("RoundProgress").getComponent(v),this.round_label=this.ui.getChildByName("Round").getComponent(w),this.infotab=this.ui.getChildByName("Info").getComponent(W),this.minimap=this.ui.getChildByName("Minimap"),this.minimap&&(this.minimap_item_node=this.minimap.getChildByName("items"),this.minimap_snake_node=this.minimap.getChildByName("snake")),this.editbox=this.ui.getChildByName("Input").getChildByName("EditBox"),this.mini_items=[],this.slider_minimap=this.ui.getChildByName("Slider").getComponent(v),this.directions=this.ui.getChildByName("Directions"),this.Up=this.ui.getChildByName("Directions").getChildByName("Up").getComponent(y),this.Down=this.ui.getChildByName("Directions").getChildByName("Down").getComponent(y),this.Left=this.ui.getChildByName("Directions").getChildByName("Left").getComponent(y),this.Right=this.ui.getChildByName("Directions").getChildByName("Right").getComponent(y),this.playback=this.ui.getChildByName("Playback"),this.play_btn=this.playback.getChildByName("Play_btn").getChildByName("icon_small_next").getComponent(x),this.infotab.init(),this.gen.minimap={x:this.minimap_x,y:this.minimap_y,width:this.minimap_width,height:this.minimap_height},this.gen.minimap_rate=this.minimap_rate,this.snake_miniinfo=this.ui.getChildByName("mini_snake_info"),this.snake_miniinfo.active=!0,this.snake_miniinfo_text=this.ui.getChildByName("mini_snake_info").getChildByName("text").getComponent(w);var t=this.ui.getChildByName("team");this.yellow_info=t.getChildByName("yellow_team").getComponent(w),this.blue_info=t.getChildByName("blue_team").getComponent(w);var i=this.slider_minimap.node.getChildByName("Handle");i.on(m.EventType.MOUSE_DOWN,(function(t){e.minimap_handle_moved=!0,e.update_minimap_by_slider()}),this),i.on(m.EventType.MOUSE_UP,(function(t){e.minimap_handle_moved&&(e.minimap_handle_moved=!1)}),this),p.on(c.EventType.MOUSE_UP,(function(t){e.minimap_handle_moved&&(e.minimap_handle_moved=!1)}),this),i.on(m.EventType.MOUSE_MOVE,(function(t){e.minimap_handle_moved&&e.update_minimap_by_slider()})),p.on(c.EventType.MOUSE_MOVE,(function(t){e.minimap_handle_moved&&e.update_minimap_by_slider()})),this.death_target=this.node.getChildByName("death_target").getComponent(x),this.death_target.node.active=!1},a.init_anim=function(){},a.config_file=function(){this.offline_file=[]},a.init_round=function(){this.cur_round=1,this.cur_snake=this.s1,this.cur_team=1},a.init_item=function(e){for(var t=0;t<e.length;t++)null==this.gen.itemSeed.get(e[t].time)&&this.gen.itemSeed.set(e[t].time,new Array),e[t].id=t,this.gen.itemSeed.get(e[t].time).push(e[t])},a.init_info=function(){this.infotab.init()},a.shift=function(){this.cur_team=3-this.cur_team,this.cur_team==this.first&&(this.cur_round++,this.round_info_parsed=!1),this.cur_snake=1==this.cur_team?this.s1:this.s2},a.parse=function(e,t,i){var n=new A,s=null;if(!this.round_info_parsed&&"gotten_item"in e){this.gen.generateItems(this.cur_round,t);for(var a,o=e.gotten_item,l=r(o);!(a=l()).done;){var _=a.value,h=_.item,m=_.snake,u=this.gen.getItem(h),d=this.snakes[m].team;u.type==q.elongate?1==d?n.delta_len1+=u.param:n.delta_len2+=u.param:u.type==q.melt&&null==this.snakes[m].meltitem?1==d&&null==this.snakes[m].meltitem?n.delta_melt1+=1:n.delta_melt2+=1:u.type==q.split&&null==this.snakes[m].splititem&&(1==d?n.delta_split1+=1:n.delta_split2+=1),this.snakes[m].eatItem(this.gen.getItem(h),t),this.snakes[m].refreshed=!1,console.log(m,"got",h)}for(var f,p=e.expired_item,c=r(p);!(f=c()).done;){var g=f.value.item;this.gen.deleteItem(g,t)}if(i){for(var b=this.s1;b;b=b.next)b.refreshed||(b.setSkin(),b.refreshed=!0),this.Add_Snake_Event(b);for(var v=this.s2;v;v=v.next)v.refreshed||(v.setSkin(),v.refreshed=!0),this.Add_Snake_Event(v)}var w=this.cur_snake?this.cur_snake:1==this.first?this.s2:this.s1;this.my_turn(w),this.cur_frame++,this.round_info_parsed=!0}else if("basic"in e){this.cur_snake.reset_blink();var y=e.basic;this.cur_snake.id!=y.snake&&(console.log("current snake error: get opera.snake=",y.snake,"should be ",this.cur_snake.id),console.log("processed operation:",e));var x=this.cur_snake,E=x.team,S=!1;switch(y.type){case 1:var P=null;x.length_bank+x.extra_length_bank>0&&(1==E?(n.delta_area1+=1,n.delta_len1-=1):(n.delta_area2+=1,n.delta_len2-=1)),-1!==e.got_item&&((P=this.gen.items[e.got_item]).type==q.elongate?1==E?n.delta_len1+=P.param:n.delta_len2+=P.param:P.type==q.melt&&null==x.meltitem?1==E?n.delta_melt1+=1:n.delta_melt2+=1:P.type==q.split&&null==x.splititem&&(1==E?n.delta_split1+=1:n.delta_split2+=1)),x.move(y.direction,P,t),this.Add_Snake_Event(x),P&&(console.log(x.id,"got",P.id),console.log(P)),e.should_solid&&(n.delta_area1-=this.gen.wall1_cnt,n.delta_area2-=this.gen.wall2_cnt,this.gen.generateWalls(e.extra_solid_area,this.cur_snake.team),n.delta_area1+=this.gen.wall1_cnt,n.delta_area2+=this.gen.wall2_cnt);break;case 2:x.extra_length_bank>0&&(x.extra_length_bank--,1==x.team?n.delta_len1--:n.delta_len2--);this.gen.items[y.item_id];1==E?n.delta_melt1-=1:n.delta_melt2-=1,t&&(this.melter.node.setPosition(this.cur_snake.head.node.getPosition().add(new k(.5,.5,0))),this.melter.resetSystem(),this.melter.angle=(this.cur_snake.head_dir-2)%4*90);var C=this.cur_snake.melt(this.gen.walls);C&&(n.delta_area1-=C.w1_cnt,n.delta_area2-=C.w2_cnt,this.gen.wall1_cnt-=C.w1_cnt,this.gen.wall2_cnt-=C.w2_cnt);break;case 3:if(x.extra_length_bank>0&&(x.extra_length_bank--,1==x.team?n.delta_len1--:n.delta_len2--),-1!=e.new_snake_id){1==E?this.s1_cnt++:2==E?this.s2_cnt++:console.log("team error");var N=x.split(e.new_snake_id);for(this.Add_Snake_Event(N),this.Add_Snake_Event(this.cur_snake);this.snakes.length<e.new_snake_id+1;)this.snakes.push(null);this.snakes[e.new_snake_id]=N,x.next&&(x.next.prev=N),N.next=x.next,x.next=N,N.prev=x,this.cur_snake=N}}if(0!=e.dead_snake.length)for(var I=0;I<e.dead_snake.length;I++){e.dead_snake[I]==y.snake&&(s={id:y.snake,reason:-1},2==y.type?-1==y.item_id?s.reason=4:s.reason=5:s.reason=y.direction);var B=e.dead_snake[I];this.s1==this.snakes[B]&&(this.s1=this.s1.next),this.s2==this.snakes[B]&&(this.s2=this.s2.next),this.snakes[B].prev&&(this.snakes[B].prev.next=this.snakes[B].next),this.snakes[B].next&&(this.snakes[B].next.prev=this.snakes[B].prev),1==this.snakes[B].team?this.s1_cnt--:this.s2_cnt--,1==this.snakes[B].team?(n.delta_area1-=this.snakes[B].len,null!=this.snakes[B].meltitem&&(n.delta_melt1-=1),this.snakes[B].length_bank>0&&(n.delta_len1-=this.snakes[B].length_bank+this.snakes[B].extra_length_bank)):(n.delta_area2-=this.snakes[B].len,null!=this.snakes[B].meltitem&&(n.delta_melt2-=1),this.snakes[B].length_bank>0&&(n.delta_len2-=this.snakes[B].length_bank+this.snakes[B].extra_length_bank)),this.snakes[B]==this.cur_snake?S=!0:this.snakes[B].onKilled()}var O=this.cur_snake;if(this.cur_snake.next?(this.cur_snake=this.cur_snake.next,this.my_turn(this.cur_snake)):(this.shift(),this.online_mode&&!this.cur_snake&&this.shift(),this.cur_team!=this.first&&this.cur_snake&&this.my_turn(this.cur_snake)),S&&(O.onKilled(),!e.should_solid&&1==y.type)){var T=O.head.node.getPosition();if(T.x>=0&&T.x<=15&&T.y>=0&&T.y<=15){this.death_target.node.setPosition(T),this.death_target.node.active=!0,this.death_target.node.setSiblingIndex(1e4);var U=this;setTimeout((function(){U.death_target.node.active=!1}),200)}}this.cur_frame++,i&&this.reloadSnakesOnMinimap()}else if("winner"in e)return this.winner=e.winner,this.Update_Info(n),this.show_global_info(null,null,this.winner,null),void this.update_main_progress_bar();this.minimap_reset_frame(),this.Update_Info(n),this.show_global_info(null,null,null,s),this.update_main_progress_bar()},a.my_turn=function(e){e.blink(this.online_mode),this.disable_direction_key(e),this.cur_equipment.Show_Equipment(e),this.can_operate=!0},a.disable_direction_key=function(e){if(this.Up.interactable=!0,this.Down.interactable=!0,this.Left.interactable=!0,this.Right.interactable=!0,e.len>2||2==e.len&&e.length_bank+e.extra_length_bank>0)switch(e.head_dir){case D.UP:this.Down.interactable=!1;break;case D.DOWN:this.Up.interactable=!1;break;case D.LEFT:this.Right.interactable=!1;break;case D.RIGHT:this.Left.interactable=!1}},a.update_main_progress_bar=function(){this.slider_progress.progress=1/(this.frame_cnt-1)*this.cur_frame,this.update_progress_bar()},a.show_global_info=function(e,t,i,n){if(i&&-1!=i)this.snake_miniinfo_text.string=0==i?"YELLOW WIN":"BLUE WIN";else if(e)this.snake_miniinfo_text.string="ID :  "+e.id+"\nLength : "+e.len+"\nLength Bank :  "+e.length_bank+"\nMelt Item :  "+(null==e.meltitem?0:1)+"\n";else if(t){var s;switch(t.type){case q.elongate:s="Elongate Item";break;case q.split:s="Split Item";break;case q.melt:s="Melt Item"}this.snake_miniinfo_text.string="Type :  "+s+"\nx :  "+t.x+"\ny :  "+t.y+"\nParam :  "+t.param+"\n"}else if(this.snake_miniinfo_text.string="CurrentRound :  "+this.cur_round+"\nCurrentTeam :  "+(1==this.cur_team?"Yellow":"Blue")+"\nCurrentSnake :  "+(this.cur_snake?this.cur_snake.id:"")+"\n",n)switch(n.reason){case 0:this.snake_miniinfo_text.string+="Snake "+n.id+" dead of moving up\n";break;case 1:this.snake_miniinfo_text.string+="Snake "+n.id+" dead of moving to the right\n";break;case 2:this.snake_miniinfo_text.string+="Snake "+n.id+" dead of moving down\n";break;case 3:this.snake_miniinfo_text.string+="Snake "+n.id+" dead of moving to the left\n";break;case 4:this.snake_miniinfo_text.string+="Snake "+n.id+" dead of spliting more than 4\n";break;case 5:this.snake_miniinfo_text.string+="Snake "+n.id+" dead of using props illegally\n"}},a.Add_Snake_Event=function(e){var t=this;e.head.node.on(m.EventType.MOUSE_DOWN,(function(i){t.cur_equipment.Show_Equipment(e)}),this),e.head.node.on(m.EventType.MOUSE_ENTER,(function(i){t.show_global_info(e,null,null,null)}),this),e.head.node.on(m.EventType.MOUSE_LEAVE,(function(e){t.show_global_info(null,null,null,null)}),this)},a.Add_Item_Event=function(e){var t=this;e.node.on(m.EventType.MOUSE_ENTER,(function(i){t.show_global_info(null,e,null,null)}),this),e.node.on(m.EventType.MOUSE_LEAVE,(function(e){t.show_global_info(null,null,null,null)}),this)},a.Update_Info=function(e){this.infotab.snakenum_1=this.s1_cnt,this.infotab.snakenum_2=this.s2_cnt,this.infotab.gamepoints_1+=e.delta_area1,this.infotab.gamepoints_2+=e.delta_area2,this.infotab.lenthbank_1+=e.delta_len1,this.infotab.lenthbank_2+=e.delta_len2,this.infotab.meltattack_1+=e.delta_melt1,this.infotab.meltattack_2+=e.delta_melt2,this.infotab.splitpotion_1+=e.delta_split1,this.infotab.splitpotion_2+=e.delta_split2,this.infotab.update_info()},a.Shift_btn=function(){if(this.playing){this.Pause_btn();var e=this;E.load("Icons/icon_small_next/spriteFrame",f,(function(t,i){t?console.log(t):(console.log(i),e.play_btn.spriteFrame=i,e.play_btn.node.setPosition(new k(.136)))}))}else{this.Play_btn();var t=this;E.load("Icons/icon_small_pause/spriteFrame",f,(function(e,i){e?console.log(e):(console.log(i),t.play_btn.spriteFrame=i,t.play_btn.node.setPosition(new k))}))}},a.Pause_btn=function(){this.playing&&(this.playing=!1,clearInterval(this.handler))},a.Play_btn=function(){var e=this;clearInterval(this.handler),this.playing=!0,this.handler=setInterval((function(){e.play_frame()}),100)},a.FastForward=function(){var e=this;clearInterval(this.handler),this.playing=!0,this.handler=setInterval((function(){e.play_frame()}),50);var t=this;E.load("Icons/icon_small_pause/spriteFrame",f,(function(e,i){e?console.log(e):(console.log(i),t.play_btn.spriteFrame=i,t.play_btn.node.setPosition(new k))}))},a.Forward_btn=function(){this.playing||(this.play_frame(),this.update_main_progress_bar(),this.update_progress_bar())},a.Backward_btn=function(){if(!this.playing){var e=this.cur_frame;0!=e&&(this.release_frame(),this.load_frame(e-1,!1))}},a.Melt_btn=function(){this.online_mode&&(this.cur_team==this.my_team?this.cur_snake&&this.cur_snake.meltitem&&this.cur_snake.len>1?this.sendmsg(2,this.cur_snake.id,this.cur_snake.meltitem.id):console.log("you cannot melt!"):console.log("not your turn!"))},a.Split_btn=function(){this.online_mode&&(this.cur_team==this.my_team?this.cur_snake&&this.cur_snake.splititem&&this.cur_snake.len>1&&(1==this.cur_team?this.s1_cnt:this.s2_cnt)<4?this.sendmsg(3,this.cur_snake.id,this.cur_snake.splititem.id):console.log("you cannot split!"):console.log("not your turn!"))},a.Up_btn=function(){if(this.online_mode){if(!this.Up.interactable)return void console.log("You can't move in this direction!");this.online_mode&&this.cur_snake&&this.cur_snake.team==this.my_team&&this.sendmsg(1,this.cur_snake.id,1)}},a.Down_btn=function(){if(this.online_mode){if(!this.Down.interactable)return void console.log("You can't move in this direction!");this.online_mode&&this.cur_snake&&this.cur_snake.team==this.my_team&&this.sendmsg(1,this.cur_snake.id,3)}},a.Left_btn=function(){if(this.online_mode){if(!this.Left.interactable)return void console.log("You can't move in this direction!");this.online_mode&&this.cur_snake&&this.cur_snake.team==this.my_team&&this.sendmsg(1,this.cur_snake.id,2)}},a.Right_btn=function(){if(this.online_mode){if(!this.Right.interactable)return void console.log("You can't move in this direction!");this.online_mode&&this.cur_snake&&this.cur_snake.team==this.my_team&&this.sendmsg(1,this.cur_snake.id,0)}},a.Press_Left=function(){this.current_forward_round>1&&this.current_forward_round--,this.minimap_release_frame(),this.show_minimap_frame(this.cur_round+this.current_forward_round),this.update_progress_bar(),this.update_minimap_editbox(this.cur_round+this.current_forward_round)},a.Press_Right=function(){this.current_forward_round<this.round_max-this.cur_round&&this.current_forward_round++,this.minimap_release_frame(),this.show_minimap_frame(this.cur_round+this.current_forward_round),this.update_progress_bar(),this.update_minimap_editbox(this.cur_round+this.current_forward_round)},a.update_progress_bar=function(){0!=this.round_max&&(this.slider_minimap.getComponent(v).progress=Math.min(1/this.round_max*(this.cur_round+this.current_forward_round),1))},a.update_minimap_editbox=function(e){this.editbox.getComponent(S).string=(e-this.cur_round).toString()},a.update_minimap_by_input=function(){var e=this.editbox,t=Number(e.getComponent(S).string);isNaN(t)&&(t=this.current_forward_round,e.getComponent(S).string=t.toString());var i=this.cur_round+t;i<=0&&(i=1),i>=this.round_max&&(i=this.round_max),this.current_forward_round=i-this.cur_round,this.minimap_release_frame(),this.show_minimap_frame(i),this.update_progress_bar()},a.onKeyDown=function(e){var t=new N;if(t.type=q.elongate,t.param=4,this.can_press&&this.can_operate)switch(this.can_press=!1,e.keyCode){case P.ARROW_LEFT:case P.KEY_A:this.Left_btn();break;case P.ARROW_RIGHT:case P.KEY_D:this.Right_btn();break;case P.ARROW_UP:case P.KEY_W:this.Up_btn();break;case P.ARROW_DOWN:case P.KEY_S:this.Down_btn();break;case P.KEY_M:this.Melt_btn();break;case P.KEY_F:this.Split_btn();break;case P.KEY_L:break;case P.KEY_V:console.log("press V"),this.to_first_frame();break;case P.KEY_B:this.Play_btn();break;case P.KEY_T:this.Pause_btn();break;case P.KEY_P:break;case P.KEY_C:this.playing||this.play_frame()}},a.onEditReturn=function(e){this.websocket(this.player_token.string),this.player_token.node.active=!1},a.onKeyUp=function(e){this.can_press=!0},a.load_replay=function(e){var t=this,i=new FileReader;i.onloadend=function(){var e=JSON.parse(i.result);console.log(e),t.delta_file={json:e},t.directions.active=!1,t.playback.active=!0,t.gen_all_frames(),console.log("finished"),t.to_first_frame()},i.readAsText(e)},a.gen_all_frames=function(){var e=this.delta_file.json,t=e.item_list,i=e.round_info,n=e.operations,s=e.end_info;this.item_list=t,this.round_infos=i,this.po=n,this.round_max=i.length,this.end_info=s,this.init_item(t);for(var a=0;a<i.length;a++){if(this.parse(i[a],!1,!1),this.offline_file.push(this.gen_frame()),2*a>=n.length||0==n[2*a].length)this.shift();else for(var o,l=r(n[2*a]);!(o=l()).done;){var _=o.value;this.parse(_,!1,!1),this.offline_file.push(this.gen_frame())}if(2*a+1>=n.length||0==n[2*a+1].length)this.shift();else for(var h,m=r(n[2*a+1]);!(h=m()).done;){var u=h.value;this.parse(u,!1,!1),a==i.length-1&&s&&"NORMAL"==s.type&&this.parse(s,!1,!1),this.offline_file.push(this.gen_frame())}}console.log(this.offline_file),this.frame_cnt=this.offline_file.length},a.play_frame=function(){var e,t=this.round_infos,i=this.po;for(console.log("this frame: ",this.cur_frame);;){if(this.cur_round-1>=t.length)return console.log("半场结束"),this.end_info&&this.parse(this.end_info,!1,!1),void(this.playing&&this.Shift_btn());if(!this.round_info_parsed&&this.cur_snake==(1==this.first?this.s1:this.s2))return void this.parse(t[this.cur_round-1],!0,!0);var n=2*this.cur_round+(this.cur_team-this.first)%2-2;if(n>=i.length)return console.log("游戏结束"),this.end_info&&this.parse(this.end_info,!1,!1),void(this.playing&&this.Shift_btn());if(0!==(e=i[n]).length)break;this.shift()}for(var s,a=r(e);!(s=a()).done;){var o=s.value;if(o.basic.snake==this.cur_snake.id){this.parse(o,!0,!0);break}}},a.item_x_on_minimap=function(e){return e},a.item_y_on_minimap=function(e){return e},a.update_minimap_by_slider=function(){var e=this.slider_minimap.getComponent(v).progress,t=Math.ceil(e*this.round_max);this.current_forward_round=t-this.cur_round,this.minimap_release_frame(),this.show_minimap_frame(t),this.update_minimap_editbox(t)},a.copySnakeToMinimap=function(e){var t;if(2==e.team)for(var i=e.head;null!=i;){var n=i.node.getPosition();null!=i.next&&(s=i.next.node.getPosition().subtract(i.node.getPosition())),null!=i.prev&&(a=i.node.getPosition().subtract(i.prev.node.getPosition())),i==e.head?null==i.next?t=g(e.minisnake_blue_head_right):s.equals(new k(0,1,0))?t=g(e.minisnake_blue_head_down):s.equals(new k(1,0,0))?t=g(e.minisnake_blue_head_left):s.equals(new k(-1,0,0))?t=g(e.minisnake_blue_head_right):s.equals(new k(0,-1,0))&&(t=g(e.minisnake_blue_head_up)):i==e.tail?a.equals(new k(0,1,0))?t=g(e.minisnake_blue_v):a.equals(new k(1,0,0))||a.equals(new k(-1,0,0))?t=g(e.minisnake_blue_h):a.equals(new k(0,-1,0))&&(t=g(e.minisnake_blue_v)):a.equals(new k(0,1,0))?s.equals(new k(0,1,0))?t=g(e.minisnake_blue_v):s.equals(new k(1,0,0))?t=g(e.minisnake_blue_rightdown):s.equals(new k(-1,0,0))&&(t=g(e.minisnake_blue_leftdown)):a.equals(new k(0,-1,0))?s.equals(new k(0,-1,0))?t=g(e.minisnake_blue_v):s.equals(new k(1,0,0))?t=g(e.minisnake_blue_rightup):s.equals(new k(-1,0,0))&&(t=g(e.minisnake_blue_leftup)):a.equals(new k(1,0,0))?s.equals(new k(1,0,0))?t=g(e.minisnake_blue_h):s.equals(new k(0,1,0))?t=g(e.minisnake_blue_leftup):s.equals(new k(0,-1,0))&&(t=g(e.minisnake_blue_leftdown)):a.equals(new k(-1,0,0))&&(s.equals(new k(-1,0,0))?t=g(e.minisnake_blue_h):s.equals(new k(0,1,0))?t=g(e.minisnake_blue_rightup):s.equals(new k(0,-1,0))&&(t=g(e.minisnake_blue_rightdown))),t.setParent(this.minimap_snake_node),t.setPosition(new k(this.item_x_on_minimap(n.x),this.item_y_on_minimap(n.y),0)),t.active=!0,i=i.next}else if(1==e.team)for(var s,a,o=e.head;null!=o;){var r=o.node.getPosition();null!=o.next&&(s=o.next.node.getPosition().subtract(o.node.getPosition())),null!=o.prev&&(a=o.node.getPosition().subtract(o.prev.node.getPosition())),o==e.head?null==o.next?(t=g(e.minisnake_green_head_right),console.log("hr9 at",r)):s.equals(new k(0,1,0))?t=g(e.minisnake_green_head_down):s.equals(new k(1,0,0))?t=g(e.minisnake_green_head_left):s.equals(new k(-1,0,0))?(t=g(e.minisnake_green_head_right),console.log("hr10 at",r)):s.equals(new k(0,-1,0))&&(t=g(e.minisnake_green_head_up)):o==e.tail?a.equals(new k(0,1,0))?t=g(e.minisnake_green_v):a.equals(new k(1,0,0))||a.equals(new k(-1,0,0))?t=g(e.minisnake_green_h):a.equals(new k(0,-1,0))&&(t=g(e.minisnake_green_v)):a.equals(new k(0,1,0))?s.equals(new k(0,1,0))?t=g(e.minisnake_green_v):s.equals(new k(1,0,0))?t=g(e.minisnake_green_rightdown):s.equals(new k(-1,0,0))&&(t=g(e.minisnake_green_leftdown)):a.equals(new k(0,-1,0))?s.equals(new k(0,-1,0))?t=g(e.minisnake_green_v):s.equals(new k(1,0,0))?t=g(e.minisnake_green_rightup):s.equals(new k(-1,0,0))&&(t=g(e.minisnake_green_leftup)):a.equals(new k(1,0,0))?s.equals(new k(1,0,0))?t=g(e.minisnake_green_h):s.equals(new k(0,1,0))?t=g(e.minisnake_green_leftup):s.equals(new k(0,-1,0))&&(t=g(e.minisnake_green_leftdown)):a.equals(new k(-1,0,0))&&(s.equals(new k(-1,0,0))?t=g(e.minisnake_green_h):s.equals(new k(0,1,0))?t=g(e.minisnake_green_rightup):s.equals(new k(0,-1,0))&&(t=g(e.minisnake_green_rightdown))),t.setParent(this.minimap_snake_node),t.setPosition(new k(this.item_x_on_minimap(r.x),this.item_y_on_minimap(r.y),0)),t.active=!0,o=o.next}},a.reloadSnakesOnMinimap=function(){for(var e,t=r(this.minimap_snake_node.children);!(e=t()).done;){var i=e.value;i&&(i.active=!1,i.destroy())}for(var n=0;n<this.snakes.length;++n)this.snakes[n]&&this.copySnakeToMinimap(this.snakes[n])},a.show_minimap_frame=function(e){for(var t=[],i=e;i>=0&&e-i<16;--i){var n=this.gen.itemSeed.get(i);if(n)for(var s=0;s<n.length;++s){var a=this.gen.items[n[s].id];a&&a.eaten||t.push(n[s])}}if(t)for(var o=0,r=t;o<r.length;o++){var l=r[o];if(l){var _=void 0;(_=l.type==q.elongate?g(this.mini_item):l.type==q.split?g(this.mini_item2):g(this.mini_item3)).setParent(this.minimap_item_node),_.setPosition(l.x,l.y);var h=_.getComponent(B);h.x=l.x,h.y=l.y,h.param=l.param,h.type=l.type,h.time=l.time,this.mini_items.push(_),this.Add_Item_Event(h)}}},a.minimap_release_frame=function(){for(var e=0;e<this.mini_items.length;++e)if(this.mini_items[e]){var t=this.mini_items[e];t&&t.isValid&&t.destroy()}},a.minimap_reset_default=function(){this.current_forward_round=this.default_forward_round,this.minimap_reset_frame()},a.minimap_reset_frame=function(){var e=this.cur_round+this.current_forward_round;this.minimap_release_frame(),this.show_minimap_frame(e),this.update_progress_bar(),this.update_minimap_editbox(e)},a.progress_bar_moved=function(){var e=Math.floor(this.slider_progress.progress*(this.frame_cnt-1));e!=this.cur_round&&(this.release_frame(),this.load_frame(e,!1),this.update_progress_bar())},a.load_frame=function(e,t){for(var i=this.offline_file[e],n=i.items,s=0;s<n.length;s++){var a=n[s];if(a){var o=this.gen.generateItem(a.x,a.y,a.type,a.param,a.time,t);o.eaten=a.eaten,o.eaten&&o.onEaten(!1)}else this.gen.items.push(null)}var l=i.wall1,_=i.wall2;this.gen.generateWalls(l,1),this.gen.generateWalls(_,2);for(var h=i.snake1,m=i.snake2,u=1;u<3;u++)for(var d,f=null,p=r(1===u?h:m);!(d=p()).done;){var c=d.value,k=g(this.snake_pref).getComponent(U);k.id=c.id,k.team=u,k.head_dir=c.head_dir,-1!=c.split&&k.eatItem(this.gen.getItem(c.split),!1),-1!=c.melt&&k.eatItem(this.gen.getItem(c.melt),!1),k.length_bank=c.length_bank,k.extra_length_bank=c.extra_length_bank,k.node.setParent(this.node.getChildByName("snake_root"));var b=c.nodes;k.head.node.setPosition(b[0].x,b[0].y,0);for(var v=k.head,w=1;w<b.length-1;w++){var y=b[w],x=new T;x.node=g(k.body_pref),x.node.setPosition(y.x,y.y,0),x.node.setParent(k.node),x.prev=v,v.next=x,v=x}for(b.length>1&&(k.tail=new T,k.tail.node=g(k.tail_pref),k.tail.node.setPosition(b[b.length-1].x,b[b.length-1].y,0),k.tail.node.setParent(k.node),k.tail.prev=v,v.next=k.tail),k.len=b.length,k.setSkin();this.snakes.length<=k.id;)this.snakes.push(null);this.snakes[k.id]=k,this.Add_Snake_Event(k),1==k.team?this.s1_cnt++:this.s2_cnt++,f?(k.prev=f,f.next=k,f=k):(1==u?this.s1=k:2==u&&(this.s2=k),f=k)}this.cur_round=i.cur_round,this.half=i.half,this.first=i.first,-1!==i.cur_snake?this.cur_snake=this.snakes[i.cur_snake]:this.cur_snake=null,this.cur_team=i.cur_team,this.cur_frame=e,this.round_info_parsed=i.round_info_parsed,this.infotab.snakenum_1=i.info1.total_num,this.infotab.snakenum_2=i.info2.total_num,this.infotab.curid_1=i.info1.cur_id,this.infotab.curid_2=i.info2.cur_id,this.infotab.gamepoints_1=i.info1.cur_area,this.infotab.gamepoints_2=i.info2.cur_area,this.infotab.lenthbank_1=i.info1.total_lenbank,this.infotab.lenthbank_2=i.info2.total_lenbank,this.infotab.meltattack_1=i.info1.total_melt,this.infotab.meltattack_2=i.info2.total_melt,this.infotab.splitpotion_1=i.info1.total_split,this.infotab.splitpotion_2=i.info2.total_split,this.infotab.update_info(),this.minimap_reset_frame(),this.update_main_progress_bar(),this.cur_snake&&this.cur_equipment.Show_Equipment(this.cur_snake),this.show_global_info(null,null,this.winner,null),this.reloadSnakesOnMinimap()},a.release_frame=function(){for(var e=0;e<this.snakes.length;e++)this.snakes[e]&&this.snakes[e].onKilled();this.snakes=[],this.s1=null,this.s2=null,this.s1_cnt=0,this.s2_cnt=0;for(var t=0;t<this.gen.items.length;t++)this.gen.items[t]&&this.gen.deleteItem(t,!1);this.gen.items=[];for(var i=0;i<16;i++)for(var n=0;n<16;n++)null!=this.gen.walls[i][n]&&(this.gen.walls[i][n].onDelete(),this.gen.walls[i][n]=null);this.gen.wall1_cnt=0,this.gen.wall2_cnt=0,this.cur_frame=-1},a.gen_frame=function(){var e=new ye;e.half=this.half,e.cur_round=this.cur_round,e.first=this.first,this.cur_snake?e.cur_snake=this.cur_snake.id:e.cur_snake=-1,e.cur_team=this.cur_team,e.round_info_parsed=this.round_info_parsed,e.snake1=[],e.snake2=[];for(var t=0;t<2;t++)for(var i=0==t?this.s1:this.s2;i;i=i.next){var n=new ve;n.id=i.id,n.team=i.team,n.head_dir=i.head_dir;for(var s=i.head;s!=i.tail;s=s.next)n.nodes.push(s.node.getPosition());i.tail&&n.nodes.push(i.tail.node.getPosition()),n.split=i.splititem?i.splititem.id:-1,n.melt=i.meltitem?i.meltitem.id:-1,n.length_bank=i.length_bank,n.extra_length_bank=i.extra_length_bank,0==t?e.snake1.push(n):e.snake2.push(n)}for(var a=0;a<this.gen.items.length;a++)if(this.gen.items[a]){var o=new I;o.x=this.gen.items[a].x,o.y=this.gen.items[a].y,o.type=this.gen.items[a].type,o.time=this.gen.items[a].time,o.param=this.gen.items[a].param,o.eaten=this.gen.items[a].eaten,e.items.push(o)}else e.items.push(null);for(var l,_=r(this.gen.walls);!(l=_()).done;)for(var h,m=l.value,u=r(m);!(h=u()).done;){var d=h.value;d&&d.node&&d.node.active&&(1==d.team?e.wall1.push({x:d.x,y:d.y}):e.wall2.push({x:d.x,y:d.y}))}return e.info1=new we,e.info1.total_num=this.infotab.snakenum_1,e.info1.cur_id=this.infotab.curid_1,e.info1.cur_area=this.infotab.gamepoints_1,e.info1.total_lenbank=this.infotab.lenthbank_1,e.info1.total_melt=this.infotab.meltattack_1,e.info1.total_split=this.infotab.splitpotion_1,e.info1.total_area=256,e.info2=new we,e.info2.total_num=this.infotab.snakenum_2,e.info2.cur_id=this.infotab.curid_2,e.info2.cur_area=this.infotab.gamepoints_2,e.info2.total_lenbank=this.infotab.lenthbank_2,e.info2.total_melt=this.infotab.meltattack_2,e.info2.total_split=this.infotab.splitpotion_2,e.info2.total_area=256,e},a.to_first_frame=function(){this.infotab.init(),this.release_frame(),this.load_frame(0,!0),this.slider_progress.progress=0},a.parse_init_info=function(e){this.my_team=e.player+1,console.log(window.saiblo.players),window.saiblo.players&&(this.yellow_info.string=window.saiblo.players[0],this.blue_info.string=window.saiblo.players[1],console.log(this.yellow_info.string),console.log(this.blue_info.string)),window.saiblo.callback.loadPlayers=this.loadPlayers},a.loadPlayers=function(e){this.yellow_info.string=e[0],this.blue_info.string=e[1],console.log(this.yellow_info.string),console.log(this.blue_info.string)},a.online_parse=function(e){var t=JSON.parse(e);if("action"==t.request){var i=JSON.parse(t.content);console.log("get message:",i),console.log(window.saiblo.players),"basic"in i||"gotten_item"in i?this.parse(i,!0,!0):"next_player"in i?(i.next_player,this.my_team):"width"in i?this.parse_init_info(i):"winner"in i?(console.log("winner:",i.winner),this.winner=i.winner,this.show_global_info(null,null,this.winner,null)):this.init_item(i)}else console.log("异常信息")},a.sendmsg=function(e,t,i){this.can_operate=!1;var n=null;e==M.move&&i in D?n={type:e,snake:t,direction:i}:e==M.item||e==M.split?n={type:e,snake:t,item_id:i}:console.log(Error);var s={request:"action",token:this.tokenB64,content:JSON.stringify(n)},a=JSON.stringify(s);console.log("send operation:",s),this.ws.send(a)},a.websocket=function(e){this.tokenB64=e;var t=atob(e);this.ws=new WebSocket("wss://"+t);var i=this;this.ws.onopen=function(){console.log("open");var e={request:"connect",token:i.tokenB64},t=JSON.stringify(e);console.log("messageJson",t),i.ws.send(t)},this.ws.onmessage=function(e){this.online_parse(e.data)}.bind(this),this.ws.onclose=function(e){console.log("close")},this.ws.onerror=function(e){console.log(Error)}},n}(C)).prototype,"snake_pref",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=n(ie.prototype,"mini_item",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=n(ie.prototype,"mini_item2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=n(ie.prototype,"mini_item3",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=n(ie.prototype,"food_prfb",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n(ie.prototype,"gen",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=n(ie.prototype,"ui",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=n(ie.prototype,"mapWidth",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),me=n(ie.prototype,"mapHeight",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),ue=n(ie.prototype,"melter",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=n(ie.prototype,"delta_file",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=n(ie.prototype,"play_sprite",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=n(ie.prototype,"pause_sprite",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=n(ie.prototype,"helper",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=n(ie.prototype,"helper_btn",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=ie))||te));l._RF.pop()}}}));

System.register("chunks:///_virtual/bodynode.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,o,t,r,c,i;return{setters:[function(e){n=e.inheritsLoose,o=e.defineProperty,t=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,i=e.Component}],execute:function(){var s;r._RF.push({},"a174eyRWPxKo7eyYR8NvCfN","bodynode",void 0);var l=c.ccclass;c.property,e("BodyNode",l("BodyNode")(s=function(e){function r(){for(var n,r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return n=e.call.apply(e,[this].concat(c))||this,o(t(n),"prev",null),o(t(n),"next",null),o(t(n),"node",null),n}return n(r,e),r}(i))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/Info.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,a,i,_,s,o,h,r,l,c,m;return{setters:[function(t){e=t.defineProperty,n=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.assertThisInitialized,_=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t._decorator,h=t.Button,r=t.Label,l=t.resources,c=t.SpriteFrame,m=t.Component}],execute:function(){var p,d,u;s._RF.push({},"d0802kUGGRPIKaYMIIDWXvD","Info",void 0);var y=o.ccclass,k=o.property;t("DeltaInfo",(function(){e(this,"delta_area1",0),e(this,"delta_area2",0),e(this,"delta_len1",0),e(this,"delta_len2",0),e(this,"delta_melt1",0),e(this,"delta_melt2",0),e(this,"delta_split1",0),e(this,"delta_split2",0)})),t("Info",y("Info")((u=n((d=function(t){function n(){for(var n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=t.call.apply(t,[this].concat(s))||this,e(i(n),"content_snake_id",null),e(i(n),"content_area",null),e(i(n),"content_item",null),e(i(n),"butten_snake_id",null),e(i(n),"butten_area",null),e(i(n),"butten_item",null),e(i(n),"snake_id",null),e(i(n),"snake_area",null),e(i(n),"snake_lenbank",null),e(i(n),"snake_split",null),e(i(n),"snake_melt",null),e(i(n),"my_path_which","Headers/which_yellow_2/spriteFrame"),e(i(n),"enemy_path_which","Headers/which_red_2/spriteFrame"),e(i(n),"my_path_area","Headers/area_yellow_2/spriteFrame"),e(i(n),"enemy_path_area","Headers/area_red_2/spriteFrame"),e(i(n),"my_path_item","Headers/item_yellow_2/spriteFrame"),e(i(n),"enemy_path_item","Headers/item_red_2/spriteFrame"),e(i(n),"my_path_which_chosen","Headers/which_black_1/spriteFrame"),e(i(n),"enemy_path_which_chosen","Headers/which_black_1/spriteFrame"),e(i(n),"my_path_area_chosen","Headers/area_black_1/spriteFrame"),e(i(n),"enemy_path_area_chosen","Headers/area_black_1/spriteFrame"),e(i(n),"my_path_item_chosen","Headers/item_black_1/spriteFrame"),e(i(n),"enemy_path_item_chosen","Headers/item_black_1/spriteFrame"),e(i(n),"total_num",1),e(i(n),"cur_id",0),e(i(n),"cur_area",1),e(i(n),"total_area",500),e(i(n),"total_lenbank",0),e(i(n),"total_melt",0),e(i(n),"total_split",0),_(i(n),"standpoint",u,i(n)),n}a(n,t);var s=n.prototype;return s.onLoad=function(){},s.start=function(){},s.Init=function(t){var e=this;console.log("init info"),this.standpoint=0==t?0:1,this.content_snake_id=this.node.getChildByName("Content").getChildByName("content_1"),this.content_area=this.node.getChildByName("Content").getChildByName("content_2"),this.content_item=this.node.getChildByName("Content").getChildByName("content_3"),this.butten_snake_id=this.node.getChildByName("Tab").getChildByName("info_1").getComponent(h),this.butten_area=this.node.getChildByName("Tab").getChildByName("info_2").getComponent(h),this.butten_item=this.node.getChildByName("Tab").getChildByName("info_3").getComponent(h),this.snake_id=this.content_snake_id.getChildByName("snake_id").getComponent(r),this.snake_area=this.content_area.getChildByName("area_num").getComponent(r),this.snake_lenbank=this.content_item.getChildByName("lenbank_num").getComponent(r),this.snake_melt=this.content_item.getChildByName("melt_num").getComponent(r),this.snake_split=this.content_item.getChildByName("split_num").getComponent(r),l.load(this.my_path_which_chosen,c,(function(t,n){e.butten_snake_id.normalSprite=n})),this.content_snake_id.active=!0,this.content_area.active=!1,this.content_item.active=!1},s.initial=function(){console.log("init info again!"),this.total_num=1,this.total_area=1,this.cur_area=1,this.total_lenbank=8,this.total_melt=0,this.total_split=0,this.content_snake_id.active=!0,this.content_area.active=!1,this.content_item.active=!1,this.update_info()},s.Checksnake=function(){var t=this;if(1==this.standpoint){var e=this.enemy_path_which_chosen,n=this.enemy_path_area,a=this.enemy_path_item;l.load(n,c,(function(e,n){t.butten_area.normalSprite=n})),l.load(a,c,(function(e,n){t.butten_item.normalSprite=n})),l.load(e,c,(function(e,n){t.butten_snake_id.normalSprite=n}))}else{var i=this.my_path_which_chosen,_=this.my_path_area,s=this.my_path_item;l.load(_,c,(function(e,n){t.butten_area.normalSprite=n})),l.load(s,c,(function(e,n){t.butten_item.normalSprite=n})),l.load(i,c,(function(e,n){t.butten_snake_id.normalSprite=n}))}this.content_snake_id.active=!0,this.content_area.active=!1,this.content_item.active=!1},s.Checkarea=function(){var t=this;if(1==this.standpoint){var e=this.enemy_path_which,n=this.enemy_path_area_chosen,a=this.enemy_path_item;l.load(n,c,(function(e,n){t.butten_area.normalSprite=n})),l.load(a,c,(function(e,n){t.butten_item.normalSprite=n})),l.load(e,c,(function(e,n){t.butten_snake_id.normalSprite=n}))}else{var i=this.my_path_which,_=this.my_path_area_chosen,s=this.my_path_item;l.load(_,c,(function(e,n){t.butten_area.normalSprite=n})),l.load(s,c,(function(e,n){t.butten_item.normalSprite=n})),l.load(i,c,(function(e,n){t.butten_snake_id.normalSprite=n}))}this.content_area.active=!0,this.content_snake_id.active=!1,this.content_item.active=!1},s.Checkitem=function(){var t=this;if(1==this.standpoint){var e=this.enemy_path_which,n=this.enemy_path_area,a=this.enemy_path_item_chosen;l.load(n,c,(function(e,n){t.butten_area.normalSprite=n})),l.load(a,c,(function(e,n){t.butten_item.normalSprite=n})),l.load(e,c,(function(e,n){t.butten_snake_id.normalSprite=n}))}else{var i=this.my_path_which,_=this.my_path_area,s=this.my_path_item_chosen;l.load(_,c,(function(e,n){t.butten_area.normalSprite=n})),l.load(s,c,(function(e,n){t.butten_item.normalSprite=n})),l.load(i,c,(function(e,n){t.butten_snake_id.normalSprite=n}))}this.content_item.active=!0,this.content_area.active=!1,this.content_snake_id.active=!1},s.update_info=function(){this.snake_id.string=""+this.total_num,this.snake_area.string=this.cur_area+"",this.snake_lenbank.string=""+this.total_lenbank,this.snake_melt.string=""+this.total_melt,this.snake_split.string=""+this.total_split,1==this.content_area.active?this.Checkarea():1==this.content_item.active?this.Checkitem():1==this.content_snake_id.active&&this.Checksnake()},n}(m)).prototype,"standpoint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=d))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/Info2.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,s,a,o,h,l,_,p,g,m,r,d,u;return{setters:[function(t){i=t.defineProperty,e=t.applyDecoratedDescriptor,n=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,h=t._decorator,l=t.Vec3,_=t.Label,p=t.Button,g=t.Sprite,m=t.color,r=t.resources,d=t.SpriteFrame,u=t.Component}],execute:function(){var c,b,k;o._RF.push({},"d2883BUIuZG25imCQaADSSQ","Info2",void 0);var B=h.ccclass,C=h.property;t("DeltaInfo",(function(){i(this,"delta_area1",0),i(this,"delta_area2",0),i(this,"delta_len1",0),i(this,"delta_len2",0),i(this,"delta_melt1",0),i(this,"delta_melt2",0),i(this,"delta_split1",0),i(this,"delta_split2",0)})),t("Info2",B("Info2")((k=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return e=t.call.apply(t,[this].concat(o))||this,s(a(e),"battlebar",k,a(e)),i(a(e),"battleicon",null),i(a(e),"battleposition",new l(53.673,-.4615,0)),i(a(e),"new_position",null),i(a(e),"standpoint",1),i(a(e),"snake_num",null),i(a(e),"game_points",null),i(a(e),"game_points_opposite",null),i(a(e),"lenth_bank",null),i(a(e),"melt_attack",null),i(a(e),"split_potion",null),i(a(e),"tab_head",null),i(a(e),"shift_button",null),i(a(e),"button_txt",null),i(a(e),"snakenum_1",1),i(a(e),"snakenum_2",1),i(a(e),"gamepoints_1",1),i(a(e),"gamepoints_2",1),i(a(e),"lenthbank_1",8),i(a(e),"lenthbank_2",8),i(a(e),"meltattack_1",0),i(a(e),"meltattack_2",0),i(a(e),"splitpotion_1",0),i(a(e),"splitpotion_2",0),i(a(e),"curid_1",0),i(a(e),"curid_2",0),i(a(e),"button_1","Textures01/Buttons/Rectangular/Yellow/Large/Button_Rectangular_Large_Background/spriteFrame"),i(a(e),"button_2","Textures01/Buttons/Rectangular/Green/Button_Rectangular_Large_Blue_Background/spriteFrame"),e}n(e,t);var o=e.prototype;return o.onLoad=function(){},o.start=function(){console.log("init info2"),this.snake_num=this.node.getChildByName("SnakeNum").getChildByName("head").getChildByName("headtxt").getComponent(_),this.game_points=this.node.getChildByName("GamePoints").getChildByName("head").getChildByName("headtxt").getComponent(_),this.game_points_opposite=this.node.getChildByName("GamePoints").getChildByName("head-opposite").getChildByName("headtxt").getComponent(_),this.lenth_bank=this.node.getChildByName("LenthBank").getChildByName("head").getChildByName("headtxt").getComponent(_),this.melt_attack=this.node.getChildByName("MeltAttack").getChildByName("head").getChildByName("headtxt").getComponent(_),this.split_potion=this.node.getChildByName("SplitPotion").getChildByName("head").getChildByName("headtxt").getComponent(_),this.tab_head=this.node.getChildByName("Window").getChildByName("Title").getChildByName("Titletxt").getComponent(_),this.shift_button=this.node.getChildByName("ShiftButton").getComponent(p),this.button_txt=this.node.getChildByName("ShiftButton").getChildByName("Label").getComponent(_),this.battlebar=this.node.getChildByName("GamePoints").getChildByName("vsbar").getChildByName("Bar").getComponent(g),this.battleicon=this.node.getChildByName("GamePoints").getChildByName("vsbar").getChildByName("Bar").getChildByName("battle").getComponent(g)},o.init=function(){this.standpoint=1,this.snakenum_1=1,this.snakenum_2=1,this.gamepoints_1=1,this.gamepoints_2=1,this.lenthbank_1=8,this.lenthbank_2=8,this.meltattack_1=0,this.meltattack_2=0,this.splitpotion_1=0,this.splitpotion_2=0,this.battlebar.fillRange=-.5,this.battleicon.node.position=this.battleposition,this.update_info()},o.shift=function(){var t=this;if(this.game_points.string=""+this.gamepoints_1,this.game_points_opposite.string=""+this.gamepoints_2,this.gamepoints_1<=0&&this.gamepoints_2<=0)this.battlebar.fillRange=-.5,this.battleicon.node.position=this.battleposition;else{this.battlebar.fillRange=-this.gamepoints_1/(this.gamepoints_1+this.gamepoints_2);var i=107.346-107.346*this.gamepoints_1/(this.gamepoints_1+this.gamepoints_2);this.battleicon.node.position=new l(i,-.4615,0)}console.log("shift"),1==this.standpoint?(this.standpoint=2,this.tab_head.string="BLUE INFO",this.tab_head.color=m("#4AA4F7"),r.load(this.button_2,d,(function(i,e){t.shift_button.normalSprite=e})),this.snake_num.string=""+this.snakenum_2,this.lenth_bank.string=""+this.lenthbank_2,this.melt_attack.string=""+this.meltattack_2,this.split_potion.string=""+this.splitpotion_2,this.button_txt.string="CLICK to see YELLOW"):(this.standpoint=1,this.tab_head.string="YELLOW INFO",this.tab_head.color=m("#F5A008"),r.load(this.button_1,d,(function(i,e){t.shift_button.normalSprite=e})),this.snake_num.string=""+this.snakenum_1,this.lenth_bank.string=""+this.lenthbank_2,this.melt_attack.string=""+this.meltattack_1,this.split_potion.string=""+this.splitpotion_1,this.button_txt.string="CLICK to see BLUE")},o.update_info=function(){if(this.game_points.string=""+this.gamepoints_1,this.game_points_opposite.string=""+this.gamepoints_2,this.gamepoints_1<=0&&this.gamepoints_2<=0)this.battlebar.fillRange=-.5,this.battleicon.node.position=this.battleposition;else{this.battlebar.fillRange=-this.gamepoints_1/(this.gamepoints_1+this.gamepoints_2);var t=107.346-107.346*this.gamepoints_1/(this.gamepoints_1+this.gamepoints_2);this.battleicon.node.position=new l(t,-.4615,0)}2==this.standpoint?(this.snake_num.string=""+this.snakenum_2,this.lenth_bank.string=""+this.lenthbank_2,this.melt_attack.string=""+this.meltattack_2,this.split_potion.string=""+this.splitpotion_2):(this.snake_num.string=""+this.snakenum_1,this.lenth_bank.string=""+this.lenthbank_1,this.melt_attack.string=""+this.meltattack_1,this.split_potion.string=""+this.splitpotion_1)},e}(u)).prototype,"battlebar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=b))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/generator.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./item.ts","./wall.ts"],(function(e){"use strict";var t,n,i,a,r,o,c,s,h,l,_,d,g,u,p,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.defineProperty},function(e){o=e.cclegacy,c=e._decorator,s=e.Prefab,h=e.instantiate,l=e.AnimationClip,_=e.animation,d=e.Vec3,g=e.Animation,u=e.Component},function(e){p=e.Item,m=e.itemType},function(e){f=e.Wall}],execute:function(){var w,y,x,v,b,S,z,I,P,k,C,D,A,T,B;o._RF.push({},"f60c8nbWuxBcrUS2DmupaH3","generator",void 0);var W=c.ccclass,F=c.property;e("Generator",(w=W("Generator"),y=F(s),x=F(s),v=F(s),b=F(s),S=F(s),z=F(s),w((k=t((P=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,i(a(t),"item_pref",k,a(t)),i(a(t),"split_pref",C,a(t)),i(a(t),"melt_pref",D,a(t)),i(a(t),"wall_pref1",A,a(t)),i(a(t),"wall_pref2",T,a(t)),i(a(t),"mini_item",B,a(t)),r(a(t),"len",1),r(a(t),"minimap",void 0),r(a(t),"minimap_rate",void 0),r(a(t),"itemSeed",new Map),r(a(t),"items",[]),r(a(t),"mini_items",[]),r(a(t),"walls",[]),r(a(t),"wall1_cnt",0),r(a(t),"wall2_cnt",0),t}n(t,e);var o=t.prototype;return o.start=function(){for(var e=0;e<16;e++){this.walls.push([]);for(var t=0;t<16;t++)this.walls[e].push(null)}},o.change_coordinate_x=function(e,t){return e*this.len},o.change_coordinate_y=function(e,t){return t*this.len},o.generateItems=function(e,t){if(null!=this.itemSeed.get(e))for(var n=0;n<this.itemSeed.get(e).length;n++){var i=this.itemSeed.get(e)[n];this.generateItem(i.x,i.y,i.type,i.param,e,t)}},o.generateItem=function(e,t,n,i,a,r){var o=new p;return o.id=this.items.length,o.type=n,o.param=i,o.x=e,o.y=t,o.time=a,n==m.elongate?o.node=h(this.item_pref):n==m.split?o.node=h(this.split_pref):o.node=h(this.melt_pref),o.node.name="item"+String(o.id),o.node.setPosition(this.change_coordinate_x(e,t),this.change_coordinate_y(e,t)),this.node.addChild(o.node),r&&this.addAnim(o),this.items.push(o),o},o.addAnim=function(e){var t=e.x,n=e.y,i=new l;i.duration=1.6,i.speed=3.2;var a=new _.VectorTrack;a.componentsCount=3,a.path=(new _.TrackPath).toProperty("position");var r=a.channels(),o=r[0],c=r[1],s=r[2],h=[[0,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+8,0)],[.1,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+7.5,0)],[.2,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+6,0)],[.3,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+3.5,0)],[.4,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n),0)],[.5,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+2.5,0)],[.6,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+4,0)],[.7,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+4.5,0)],[.8,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+4,0)],[.9,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+2.5,0)],[1,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n),0)],[1.1,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+1.5,0)],[1.2,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+2,0)],[1.3,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+1.5,0)],[1.4,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n),0)],[1.5,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n)+.5,0)],[1.6,new d(this.change_coordinate_x(t,n),this.change_coordinate_y(t,n),0)]];o.curve.assignSorted(h.map((function(e){return[e[0],{value:e[1].x}]}))),c.curve.assignSorted(h.map((function(e){return[e[0],{value:e[1].y}]}))),s.curve.assignSorted(h.map((function(e){return[e[0],{value:e[1].z}]}))),i.addTrack(a),i.name="item_generate";var u=e.node.addComponent(g);u.createState(i,"item_generate"),u.play("item_generate")},o.deleteItem=function(e,t){this.items[e]&&(this.items[e].onDelete(),this.items[e]=null)},o.ItemBlink=function(e){this.items[e]&&this.items[e].blink()},o.getItem=function(e){return this.items[e]},o.generateWalls=function(e,t){for(var n=0;n<e.length;n++){var i=e[n].x,a=e[n].y,r=new f;r.x=i,r.y=a,r.team=t,r.node=h(1==r.team?this.wall_pref1:this.wall_pref2),this.node.addChild(r.node),r.node.setPosition(this.change_coordinate_x(i,a),this.change_coordinate_y(i,a)),this.walls[i][a]&&(1==this.walls[i][a].team?this.wall1_cnt--:this.wall2_cnt--,this.walls[i][a].onDelete()),this.walls[i][a]=r}1==t?this.wall1_cnt+=e.length:this.wall2_cnt+=e.length},t}(u)).prototype,"item_pref",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(P.prototype,"split_pref",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(P.prototype,"melt_pref",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(P.prototype,"wall_pref1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(P.prototype,"wall_pref2",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(P.prototype,"mini_item",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=P))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/item.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,a,r,s,d,c,p,u,l,h,m,v;return{setters:[function(t){e=t.defineProperty,i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.assertThisInitialized,a=t.initializerDefineProperty},function(t){r=t.cclegacy,s=t._decorator,d=t.Prefab,c=t.UIOpacity,p=t.tween,u=t.AnimationClip,l=t.animation,h=t.Vec3,m=t.Animation,v=t.Component}],execute:function(){var y,f,_,g,w;t("itemType",void 0),r._RF.push({},"fd8a6lm46xOeZEQYRICvvxT","item",void 0);var T,b=s.ccclass,x=s.property;!function(t){t[t.elongate=0]="elongate",t[t.split=1]="split",t[t.melt=2]="melt"}(T||(T=t("itemType",{})));t("item_info",(function(){e(this,"id",void 0),e(this,"x",void 0),e(this,"y",void 0),e(this,"time",void 0),e(this,"type",void 0),e(this,"param",void 0),e(this,"eaten",void 0)})),t("Item",(y=b("Item"),f=x(d),y((w=i((g=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(o(i),"id",0),e(o(i),"type",void 0),e(o(i),"param",0),e(o(i),"x",0),e(o(i),"y",0),e(o(i),"time",void 0),e(o(i),"eaten",!1),a(o(i),"item_pref",w,o(i)),i}n(i,t);var r=i.prototype;return r.onDelete=function(){this.node&&this.node.isValid&&this.node.destroy(),this.isValid&&this.destroy()},r.blink=function(){var t=this.node.addComponent(c),e=t.opacity;p(t).to(.5,{opacity:70}).to(.5,{opacity:e}).union().repeat(3).start()},r.onEaten=function(t){if(t){if(this.node){var e=new u;e.duration=1.3,e.speed=1;var i=new l.VectorTrack;i.componentsCount=3,i.path=(new l.TrackPath).toProperty("position");var n=i.channels(),o=n[0],a=n[1],r=n[2],s=[[0,new h(this.node.position.x,this.node.position.y,this.node.position.z)],[1,new h(-1,-1,0)]];o.curve.assignSorted(s.map((function(t){return[t[0],{value:t[1].x}]}))),a.curve.assignSorted(s.map((function(t){return[t[0],{value:t[1].y}]}))),r.curve.assignSorted(s.map((function(t){return[t[0],{value:t[1].z}]}))),e.addTrack(i),e.name="item_destroy";var d=this.node.addComponent(m);d.createState(e,"item_destroy"),d.play("item_destroy");var v=this.node.addComponent(c);p(v).to(3,{opacity:0}).union().start(),setTimeout(function(){this.node&&(this.node.active=!1)}.bind(this),5e3)}}else this.node&&(this.node.active=!1)},i}(v)).prototype,"item_pref",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=g))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./slider-ctrl.ts","./item.ts","./miniitem.ts","./wall.ts","./help.ts","./bodynode.ts","./snake.ts","./generator.ts","./slider.ts","./equipment_column.ts","./Info.ts","./Info2.ts","./logic.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});